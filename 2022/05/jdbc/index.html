<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta property="og:title" content="JDBC" />
<meta property="og:description" content="è®°å½• JDBC ç›¸å…³çŸ¥è¯†" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://junq0420.github.io/2022/05/jdbc/" />
<meta property="article:published_time" content="2022-05-17T15:56:12+08:00" />
<meta property="article:modified_time" content="2022-05-17T15:56:12+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JDBC"/>
<meta name="twitter:description" content="è®°å½• JDBC ç›¸å…³çŸ¥è¯†"/>
<meta name="generator" content="Hugo 0.84.0" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "JDBC",
  "url": "https://junq0420.github.io/2022/05/jdbc/",
  "wordCount": "977",
  "datePublished": "2022-05-17T15:56:12+08:00",
  "dateModified": "2022-05-17T15:56:12+08:00",
  "author": {
    "@type": "Person",
    "name": "Jun qiang"
  },
  "keywords": "Java, Java_Advance"
}
</script>



    <link rel="canonical" href="https://junq0420.github.io/2022/05/jdbc/">

    <title>JDBC | My Blog</title>

    
    <!-- combined, minified CSS -->
    
    <link href="https://junq0420.github.io/css/style.5661e2c97fcfc5e47dc9df16e3ca8a3598b1d2f4acbec96eec49c72a9d6e7a31.css" rel="stylesheet" integrity="sha256-VmHiyX/PxeR9yd8W48qKNZix0vSsvslu7EnHKp1uejE=" crossorigin="anonymous">
    

    <!-- minified Font Awesome for SVG icons -->
    
    <script defer src="https://junq0420.github.io/js/fontawesome.min.f5072c55a0721857184db93a50561d7dc13975b4de2e19db7f81eb5f3fa57270.js" integrity="sha256-9QcsVaByGFcYTbk6UFYdfcE5dbTeLhnbf4HrXz&#43;lcnA=" crossorigin="anonymous"></script>

    <!-- RSS 2.0 feed -->
    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="https://junq0420.github.io">Home</a>
          
          <a class="nav-link" href="/archives/" title="">Archives</a>
          
          
          <a class="nav-link" href="/categories/" title="">Categories</a>
          
          
          <a class="nav-link" href="/tags/" title="">Tags</a>
          
        </nav>
      </div>
    </div>
    

    
    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title" dir="auto"><a href="https://junq0420.github.io" rel="home">My Blog</a></h1>
        <p class="lead blog-description" dir="auto"><ul>
<li>ä¿æŒå…´è¶£ï¼ŒæŒç»­å­¦ä¹  :)</li>
</ul>
</p>
      </div>
    </header>
    
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://junq0420.github.io/2022/05/jdbc/">JDBC</a></h2>
    <p class="blog-post-meta">
<time datetime="2022-05-17T15:56:12+08:00">2022-05-17</time>
 in 
<span class="fas fa-folder" aria-hidden="true"></span>&nbsp;<a href="/categories/java/" rel="category tag">Java</a>


<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/java_advance/" rel="tag">Java_Advance</a>

</p>
  </header>
  <p>è®°å½• JDBC ç›¸å…³çŸ¥è¯†</p>

<blockquote>
<p><strong>å­¦ä¹ ç¬”è®°ï¼Œä»…ä¾›å‚è€ƒ</strong></p>

<p><strong>å‚è€ƒ</strong>ï¼š<a href="https://www.yuque.com/books/share/ddbdba56-dc9f-4997-9e18-d9e69309d343/wgctzt">Bç«™Mirco_Frank - java è¿›é˜¶</a> |</p>
</blockquote>

<hr />

<p>JDBC æŒ‡ Java database connectivityï¼Œå®ƒæ˜¯ä¸€ä¸ª Java api å³å…è®¸ç”¨æˆ·é€šè¿‡ java æ¥è®¿é—®æ“ä½œå¤šç§å…³ç³»å‹æ•°æ®åº“çš„ä¸€å¥— <strong>è§„èŒƒ</strong>ã€‚</p>

<h2 id="ä¸Šæ‰‹ä½“éªŒ">âœ‹ ä¸Šæ‰‹ä½“éªŒ</h2>

<p>Java ä¸­å¯¹åº”çš„ api ä¸º <code>java.sql</code> ç›¸å½“äºå¸ƒæ–™ï¼Œè€Œå„å¤§æ•°æ®åº“å°±ç›¸å½“äºæœè£…å‚ï¼Œç”Ÿäº§å„ç§æœè£…ã€‚ä¸ºäº†èƒ½è®©å¸ƒæ–™è¿åˆ°å„å¤§æœè£…å‚ï¼Œä¸­é—´åˆæœ‰äº† <code>mysql-connector-java</code> (æœ¬æ–‡æ•°æ®åº“ä»¥ MySQL ä¸ºä¾‹)ï¼Œç›¸å½“äºç‰©æµè¿è¾“ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test1</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 1. åŠ è½½é©±åŠ¨ç¨‹åº --&gt; è®¢å¸ƒæ–™ï¼ŒMySQL å…¬å¸çš„
</span><span style="color:#75715e"></span>            Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.mysql.jdbc.Driver&#34;</span><span style="color:#f92672">);</span>

            <span style="color:#75715e">// 2. è·å–æ•°æ®åº“è¿æ¥ --&gt; é€è´§ï¼Œèµ°å•¥è·¯çº¿
</span><span style="color:#75715e"></span>            Connection connection <span style="color:#f92672">=</span> DriverManager<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;jdbc:mysql://localhost:3306/frank_school&#34;</span><span style="color:#f92672">,</span> 
            <span style="color:#e6db74">&#34;root&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">);</span>  <span style="color:#75715e">// å¯¹åº”å‚æ•°ä¸º URL, USER, PASSWORD
</span><span style="color:#75715e"></span>
            <span style="color:#75715e">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡ --&gt; å¸ƒæ–™é€åˆ°äº†ï¼Œå¸è´§
</span><span style="color:#75715e"></span>            Statement statement <span style="color:#f92672">=</span> connection<span style="color:#f92672">.</span><span style="color:#a6e22e">createStatement</span><span style="color:#f92672">();</span>

            <span style="color:#75715e">// 4. æ‰§è¡Œ sql è¯­å¥ï¼Œæ“ä½œæ•°æ®(ä»¥æŸ¥è¯¢ä¸ºä¾‹)  --&gt; æœè£…å‚å¼€å§‹ç”Ÿäº§å„ç§æœè£…
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå¹¶ç”¨ç»“æœé›†æ¥æ”¶æŸ¥è¯¢ç»“æœ
</span><span style="color:#75715e"></span>            ResultSet res <span style="color:#f92672">=</span> statement<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;select * from user&#34;</span><span style="color:#f92672">);</span>  

            <span style="color:#75715e">// æ‰“å°ç»“æœé›†
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>res<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>  <span style="color:#75715e">// åˆ†åˆ«è·å–æ¯è¡Œç»“æœçš„ç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰åˆ—æ•°æ®
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">int</span> id <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
                String name <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">int</span> age <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>3<span style="color:#f92672">);</span>

                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Id: &#34;</span> <span style="color:#f92672">+</span> id <span style="color:#f92672">+</span>
                    <span style="color:#e6db74">&#34;Name: &#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> 
                    <span style="color:#e6db74">&#34;Age: &#34;</span> <span style="color:#f92672">+</span> age<span style="color:#f92672">);</span>
                <span style="color:#f92672">}</span>
            <span style="color:#75715e">// close stream
</span><span style="color:#75715e"></span>            statement<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            connection<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

        statement<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>é€šè¿‡ä¸Šé¢ç¨‹åºï¼Œå¤§è‡´å°±èƒ½å¤Ÿæ˜ç™½ JDBC æ“ä½œæ•°æ®çš„è¿‡ç¨‹ã€‚</p>

<ol>
<li><p>å…ˆé€šè¿‡ç±»åŠ è½½å™¨æ¥åŠ è½½ Driverï¼›</p></li>

<li><p>å†é€šè¿‡ DriverManager æ¥è·å– connectionï¼›</p></li>

<li><p>æ¥ç€ç”± connection æ¥è·å–æ•°æ®åº“çš„æ“ä½œå¯¹è±¡ statement</p></li>

<li><p>æœ€åå†è°ƒç”¨ statement çš„ <code>statementExecuteQuery(&quot;sql&quot;)</code> å®ŒæˆæŸ¥è¯¢ã€<code>statementExecuteUpdate(&quot;sql&quot;)</code> å®Œæˆå¢åˆ æ”¹</p></li>
</ol>

<h2 id="æ•´ç†ä¼˜åŒ–">ğŸ¨ æ•´ç†ä¼˜åŒ–</h2>

<p>ä¸ºäº†è®© JDBC çš„ç¨‹åºæ›´åŠ åˆç†ï¼Œè¿˜éœ€å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œæ•´ç†ä¿®æ”¹ã€‚å¦‚ï¼š</p>

<ol>
<li><p>å°†å¸¸é‡ï¼ˆURLã€USERã€PASSWORDã€DRIVERï¼‰å’Œæ¥æ”¶å˜é‡ï¼ˆconnectionã€statementã€resï¼‰æå‰å£°æ˜å®šä¹‰å¥½</p></li>

<li><p>å°†æ•´ä¸ªè¿‡ç¨‹éƒ½ç”¨ try-catch-finally åŒ…è£¹èµ·æ¥</p></li>

<li><p>åœ¨ finally ä¸­å†æ¬¡ç”¨ try-catch å°†å˜é‡çš„å…³æµåŒ…èµ·æ¥</p></li>
</ol>

<p>ä¸‹é¢ä¸ºæ•´ç†åçš„ç¨‹åº</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.sql.DriverManager<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.Connection<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.Statement<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.ResultSet<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test2</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// å®šä¹‰å¸¸é‡
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String DRIVER <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;com.mysql.jdbc.Driver&#34;</span><span style="color:#f92672">;</span> 
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String URL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;jdbc:mysql://localhost:3306/frank_school&#34;</span><span style="color:#f92672">;</span> 
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String USER <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;root&#34;</span><span style="color:#f92672">;</span> 
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String PASSWORD <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">;</span> 

    <span style="color:#75715e">// å®šä¹‰å˜é‡
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Connection connection<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Statement statement<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> ResultSet res<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// 1. åŠ è½½é©±åŠ¨ç¨‹åº
</span><span style="color:#75715e"></span>            Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;DRIVER&#34;</span><span style="color:#f92672">);</span>

            <span style="color:#75715e">// 2. è·å–æ•°æ®åº“è¿æ¥
</span><span style="color:#75715e"></span>            connection <span style="color:#f92672">=</span> DriverManager<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span>URL<span style="color:#f92672">,</span> USER<span style="color:#f92672">,</span> PASSWORD<span style="color:#f92672">);</span>

            <span style="color:#75715e">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡
</span><span style="color:#75715e"></span>            statement <span style="color:#f92672">=</span> connection<span style="color:#f92672">.</span><span style="color:#a6e22e">createStatement</span><span style="color:#f92672">();</span>

            <span style="color:#75715e">// 4. æ‰§è¡Œ sql è¯­å¥ï¼Œè·å–ç»“æœ
</span><span style="color:#75715e"></span>            res <span style="color:#f92672">=</span> statement<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;select * from user&#34;</span><span style="color:#f92672">);</span>

            <span style="color:#75715e">// æ‰“å°ç»“æœé›†
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>res<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> id <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
                String name <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">int</span> age <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>3<span style="color:#f92672">);</span>

                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Id: &#34;</span> <span style="color:#f92672">+</span> id <span style="color:#f92672">+</span>
                    <span style="color:#e6db74">&#34;Name: &#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> 
                    <span style="color:#e6db74">&#34;Age: &#34;</span> <span style="color:#f92672">+</span> age<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                res<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
                statement<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
                connection<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<h2 id="è§„èŒƒæ“ä½œ">ğŸš© è§„èŒƒæ“ä½œ</h2>

<p>ä¸ºäº†è®©ç¨‹åºç¼–å†™çš„æ›´åŠ è§„èŒƒï¼Œè¿˜å¯ä»¥å°† JDBC çš„å‰ç½®å·¥ä½œï¼Œå¦‚å®šä¹‰ jdbc æ‰€ç”¨åˆ°çš„å¸¸é‡ã€è·å–é©±åŠ¨ç¨‹åºç­‰å°è£…ä¸ºä¸€ä¸ª JDBCUtils å·¥å…·ç±»ï¼Œè¿™æ ·èƒ½å¤Ÿå‡å°‘ä»£ç é‡ã€‚è€Œä¸”ä¸ºäº†è®©æ•°æ®è¯»å–æ›´åŠ æ–¹ä¾¿ã€å®‰å…¨ï¼Œè¿˜éœ€è¦å°†å¸¸é‡æ”¾åœ¨ <code>db.properties</code> çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå…¶ä¸­æ•°æ®æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨ï¼ˆå¦‚ï¼šuser=rootï¼‰</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">â˜… db.properties æ–‡ä»¶å†…å®¹

driver=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:3306/frank_school?characterEncoding=utf-8
user=root
password=123456</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// JDBCUtil å·¥å…·ç±»çš„å†…å®¹
</span><span style="color:#75715e"></span>
<span style="color:#f92672">import</span> java.sql.DriverManager<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.Connection<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.Statement<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.ResultSet<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.SQLException<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.io.InputStream<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.io.IOException<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.Properties<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JDBCUtil</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// å®šä¹‰æ¥æ”¶é…ç½®é¡¹çš„å˜é‡
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> String driver<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> String url<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> String user<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> String password<span style="color:#f92672">;</span>

    <span style="color:#75715e">// é€šè¿‡é™æ€ä»£ç å—é¢„å…ˆè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡¹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// å¯¼å…¥è¦è¯»å–çš„æ–‡ä»¶æµ
</span><span style="color:#75715e"></span>        InputStream inputStream <span style="color:#f92672">=</span> ClassLoader<span style="color:#f92672">.</span><span style="color:#a6e22e">getSystemResourceAsStream</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;db.properties&#34;</span><span style="color:#f92672">);</span>
        Properties properties <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">();</span>
        <span style="color:#75715e">// åŠ è½½æ–‡ä»¶æµ
</span><span style="color:#75715e"></span>        properties<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>inputStream<span style="color:#f92672">);</span>
        <span style="color:#75715e">// è·å–é…ç½®é¡¹
</span><span style="color:#75715e"></span>        driver <span style="color:#f92672">=</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;driver&#34;</span><span style="color:#f92672">);</span>
        url <span style="color:#f92672">=</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;url&#34;</span><span style="color:#f92672">);</span>
        user <span style="color:#f92672">=</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;user&#34;</span><span style="color:#f92672">);</span>
        password <span style="color:#f92672">=</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;password&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     *  å•ä¾‹è·å–æ•°æ®åº“è¿æ¥
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Connection <span style="color:#a6e22e">getConnection</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throw</span> SQLException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> DriverManager<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">(</span>url<span style="color:#f92672">,</span> user<span style="color:#f92672">,</span> password<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     *  ç»™å‡º close() çš„æ–¹æ³•ï¼Œå…³é—­è¿æ¥ï¼Œå¹¶ä¸”é‡è½½æ¥å¯¹åº”ä¸åŒçš„æ•°æ®åº“æ“ä½œ
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">close</span><span style="color:#f92672">(</span>Connection connection<span style="color:#f92672">,</span> Statement statement<span style="color:#f92672">,</span> ResultSet resultSet<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            resultSet<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            statement<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            connection<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> 
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">close</span><span style="color:#f92672">(</span>Connection connection<span style="color:#f92672">,</span> Statement statement<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            statement<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            connection<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> 
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// JDBC æ“ä½œæ•°æ®åº“
</span><span style="color:#75715e"></span>
<span style="color:#f92672">import</span> java.sql.Connection<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.Statement<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.ResultSet<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JDBCTest</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Connection connection<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Statement statement<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> ResultSet res<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// è·å–æ•°æ®åº“è¿æ¥
</span><span style="color:#75715e"></span>            connection <span style="color:#f92672">=</span> JDBCUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">();</span>
            <span style="color:#75715e">// è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡
</span><span style="color:#75715e"></span>            statement <span style="color:#f92672">=</span> connection<span style="color:#f92672">.</span><span style="color:#a6e22e">createStatement</span><span style="color:#f92672">();</span>
            <span style="color:#75715e">// æ‰§è¡Œ sql è¯­å¥
</span><span style="color:#75715e"></span>            res <span style="color:#f92672">=</span> statement<span style="color:#f92672">.</span><span style="color:#a6e22e">ExecuteQuery</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;select * from user&#34;</span><span style="color:#f92672">);</span>

            <span style="color:#75715e">// æ‰“å°ç»“æœé›†
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>res<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> id <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
                String name <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">int</span> age <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>3<span style="color:#f92672">);</span>

                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Id: &#34;</span> <span style="color:#f92672">+</span> id <span style="color:#f92672">+</span>
                    <span style="color:#e6db74">&#34;Name: &#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> 
                    <span style="color:#e6db74">&#34;Age: &#34;</span> <span style="color:#f92672">+</span> age<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                JDBCUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span>connection<span style="color:#f92672">,</span> statement<span style="color:#f92672">,</span> res<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span> 
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>ä¸‹é¢å¯¹ .properties æ–‡ä»¶åŠ Java ä¸­çš„ç›¸å…³æ–¹æ³•åšç®€è¦è¯´æ˜ï¼Œå®ƒä¸»è¦ç”¨äº Java ç›¸å…³çš„æŠ€æœ¯ä¸­ï¼Œä¸ºäº†èƒ½å­˜å‚¨åº”ç”¨çš„é…ç½®å‚æ•°ã€‚å…¶ä¸­æ¯ä¸ªå‚æ•°éƒ½ä»¥å­—ç¬¦ä¸²å¯¹çš„å½¢å¼å­˜å‚¨ï¼Œä¸€ç«¯æ˜¯å‚æ•°å(Key)ï¼Œå¦ä¸€ç«¯æ˜¯å‚æ•°å€¼(Value)ã€‚å‚æ•°çš„ä¹¦å†™æœ€å¥½ä¸€è¡Œä¸€ä¸ªï¼Œä¸”æ–‡ä»¶çš„ç¼–ç åœ¨ Java 9 ä¹‹åé‡‡ç”¨ UTF-8 çš„ç¼–ç æ ¼å¼ã€‚</p>

<p>å¦å¤–ï¼Œåƒ XMLã€JSONã€YAML ç­‰é…ç½®æ–‡ä»¶æ›´å—æ¬¢è¿ï¼Œå®ƒä»¬èƒ½å¤Ÿå®Œæˆæ›´å¤æ‚çš„é…ç½®</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">æ ¼å¼
key=value
key = value
key:value
key value

# äº•å·å¼€å¤´è¡¨æ³¨é‡Š
! æˆ–å¹å·å¼€å¤´</code></pre></div>
<p>ä»ä¸Šé¢ä»£ç ä¸­å¯äº†è§£åˆ°ï¼ŒProperties ä½äº <code>java.util.Properties</code> åŒ…ä¸‹ï¼Œå®ƒèƒ½å¤Ÿå°†é…ç½®é¡¹åŠ è½½åˆ°æµä¸­æˆ–è€…ä»æµä¸­è¯»å–é…ç½®é¡¹ã€‚å› ä¸ºå®ƒç»§æ‰¿è‡ª HashTableï¼Œæ‰€ä»¥èƒ½å¤Ÿè°ƒç”¨ put å’Œ putAll æ–¹æ³•æ¥æ·»åŠ æ•°æ®ï¼Œä½†å¹¶ä¸é¼“åŠ±è¿™æ ·åšï¼Œè€Œæ˜¯ç”¨ setProperty æ–¹æ³•æ¥ä»£æ›¿ï¼Œè¿™èƒ½ä¿è¯å½“é…ç½®é¡¹ä¸ºéå­—ç¬¦ä¸²æ—¶æ·»åŠ å¤±è´¥ã€‚</p>

<p>å½“ç„¶å®ƒè¿˜èƒ½åƒ HashMap é‚£æ ·ï¼Œé€šè¿‡ <code>entrySet(), keySet(), values()</code> æ¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä»è€Œéå†é…ç½®é¡¹ã€‚</p>

<h2 id="sql-æ³¨å…¥">ğŸ’‰ SQL æ³¨å…¥</h2>

<p>ä¸€èˆ¬ç”¨æˆ·åœ¨å‰ç«¯é¡µé¢æäº¤è¡¨å•æ—¶ï¼Œç¨‹åºæ€»è¦è·å–è¡¨å•çš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ JDBC æ‰§è¡Œå¯¹åº”çš„ sql è¯­å¥æ¥æ“ä½œæ•°æ®åº“ã€‚æ¯”å¦‚è¯´ï¼Œé€šè¿‡ç”¨æˆ·åæ¥æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// å‰ç«¯è¡¨å•
</span><span style="color:#75715e"></span>Username: Tom

<span style="color:#75715e">// è·å–è¡¨å•ä¿¡æ¯
</span><span style="color:#75715e"></span>username <span style="color:#f92672">=</span> getRequestString<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;username&#34;</span><span style="color:#f92672">);</span>

<span style="color:#75715e">// ç¼–å†™ sql è¯­å¥
</span><span style="color:#75715e"></span>sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from user where username =\&#34;&#34;</span> <span style="color:#f92672">+</span> 
        username <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\&#34;&#34;</span><span style="color:#f92672">;</span>

<span style="color:#75715e">// å¯¹åº”çš„ sql è¯­å¥
</span><span style="color:#75715e">// SELECT * FROM user WHERE username=&#34;Tom&#34;; 
</span></code></pre></div>
<p>è¿™æ ·å¤„ç†çœ‹ä¼¼å¾ˆæ­£å¸¸ï¼Œä½†å´æœ‰ç€æ½œåœ¨çš„å±é™©ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»‘å®¢ä¼šé’» sql è¯­å¥çš„ç©ºå­ï¼Œä»è€Œç»•è¿‡æ£€æŸ¥è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// 1. åˆ©ç”¨ &#34;1=1&#34; ä¿è¯æ’ä¸ºçœŸ
</span><span style="color:#75715e">// å‰ç«¯è¡¨å•
</span><span style="color:#75715e"></span>UserId: 1 OR 1<span style="color:#f92672">=</span>1

<span style="color:#75715e">// è·å–è¡¨å•ä¿¡æ¯
</span><span style="color:#75715e"></span>id <span style="color:#f92672">=</span> getRequestString<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UserId&#34;</span><span style="color:#f92672">);</span>

<span style="color:#75715e">// ç¼–å†™ sql è¯­å¥
</span><span style="color:#75715e"></span>sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from user where id =&#34;</span> <span style="color:#f92672">+</span> 
        id <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">;</span>

<span style="color:#75715e">// å¯¹åº”çš„ sql è¯­å¥
</span><span style="color:#75715e">// SELECT * FROM user WHERE id=1 OR 1=1;
</span><span style="color:#75715e">// è¯¥ sql ç›¸å½“äºç›´æ¥æ‰§è¡Œäº† SELECT * FROMã€€user;
</span><span style="color:#75715e">// ç›´æ¥è·å–åˆ°æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/**********************åˆ†å‰²çº¿************************/</span>

<span style="color:#75715e">// 2. åˆ©ç”¨ &#34;=&#34;
</span><span style="color:#75715e">// å‰ç«¯è¡¨å•
</span><span style="color:#75715e"></span>Username: <span style="color:#e6db74">&#34;or&#34;&#34;=&#34;</span>
Password: <span style="color:#e6db74">&#34;or&#34;&#34;=&#34;</span>

<span style="color:#75715e">// è·å–è¡¨å•ä¿¡æ¯
</span><span style="color:#75715e"></span>username <span style="color:#f92672">=</span> getRequestString<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Username&#34;</span><span style="color:#f92672">);</span>
password <span style="color:#f92672">=</span> getRequestString<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Password&#34;</span><span style="color:#f92672">);</span>

<span style="color:#75715e">// ç¼–å†™ sql è¯­å¥
</span><span style="color:#75715e"></span>sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from user where username =\&#34;&#34;</span> <span style="color:#f92672">+</span> 
        username <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\&#34; and password=\&#34;&#34;</span> <span style="color:#f92672">+</span> 
        password <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\&#34;&#34;</span><span style="color:#f92672">;</span>

<span style="color:#75715e">// å¯¹åº”çš„ sql è¯­å¥
</span><span style="color:#75715e">// SELECT * FROM user WHERE username=&#34;&#34;or&#34;&#34;
</span><span style="color:#75715e">// and password=&#34;&#34;=&#34;&#34;;
</span><span style="color:#75715e">// ä¹Ÿç›¸å½“æ‰§è¡Œ SELECT * FROMã€€user;
</span></code></pre></div>
<p>å¯¹äºè¿™ç§ç›´æ¥å°†ç”¨æˆ·çš„è¾“å…¥ä½œä¸º sql è¯­å¥çš„å‚æ•°ï¼Œå°†ä¼šå¼•èµ· SQL æ³¨å…¥ä»è€Œæ•°æ®åº“æ•°æ®æ³„éœ²æˆ–æ¯åã€‚äºæ˜¯ JDBC ä¸­å°±æœ‰äº† <code>PreparedStatement</code> ç±»ï¼Œä»¥æ­¤æ¥é˜²æ­¢ SQL æ³¨å…¥ã€‚</p>

<h2 id="preparedstatement">ğŸŒ‚ PreparedStatement</h2>

<p>PreparedStatement å±äº <code>java.sql.PreparedStatement</code>åŒ…ï¼Œå®ƒçš„å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªé¢„å…ˆç¼–è¯‘çš„ SQL è¯­å¥ï¼ŒSQL è¯­å¥ä¼šé¢„å…ˆç¼–è¯‘å¥½ç„¶åå†å­˜æ”¾åœ¨è¯¥å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡èƒ½å¤Ÿè¢«ç”¨æ¥å¤šæ¬¡é«˜æ•ˆåœ°æ‰§è¡Œ SQL è¯­å¥ã€‚PreparedStatement çš„ç”¨æ³•ä¸ Statement ä¼šæœ‰äº›è®¸ä¸åŒï¼Œå…·ä½“çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.sql.Connection<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.PreparedStatement<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.sql.ResultSet<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> java.util.Scanner<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JDBCTest</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Connection con<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> PreparedStatement preparedStatement<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> ResultSet res<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Scanner scanner <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Scanner<span style="color:#f92672">();</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// ä¸ç”¨æˆ·äº¤äº’ï¼Œè·å–å‚æ•°
</span><span style="color:#75715e"></span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;è¯·è¾“å…¥ç”¨æˆ· ID æ¥æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼š&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#66d9ef">int</span> userId <span style="color:#f92672">=</span> scanner<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">();</span>

            <span style="color:#75715e">// ç¼–å†™ SQL è¯­å¥, ä½¿ç”¨é—®å·å ä½ç¬¦æš‚æ—¶ä»£æ›¿å…·ä½“å‚æ•°
</span><span style="color:#75715e"></span>            String sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select * from user where id=?&#34;</span><span style="color:#f92672">;</span>

            <span style="color:#75715e">// è·å–æ•°æ®åº“è¿æ¥ï¼Œå¹¶è·å–preparedStatementå¯¹è±¡
</span><span style="color:#75715e"></span>            con <span style="color:#f92672">=</span> JDBCUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">getConnection</span><span style="color:#f92672">();</span>
            preparedStatement <span style="color:#f92672">=</span> con<span style="color:#f92672">.</span><span style="color:#a6e22e">prepareStatement</span><span style="color:#f92672">(</span>sql<span style="color:#f92672">);</span>

            <span style="color:#75715e">// è®¾ç½®å‚æ•°, å…¶ä¸­ 1 æŒ‡ç¬¬ä¸€ä¸ªå ä½ç¬¦ï¼Œä¸åŒçš„å‚æ•°ç±»å‹è¦ä½¿ç”¨
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// ä¸åŒçš„æ–¹æ³•ã€‚å¦‚æ•´æ•°ç”¨ setIntï¼Œå­—ç¬¦ä¸²ç”¨ setString ç­‰
</span><span style="color:#75715e"></span>            preparedStatement<span style="color:#f92672">.</span><span style="color:#a6e22e">setInt</span><span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> userId<span style="color:#f92672">);</span>

            <span style="color:#75715e">// æ‰§è¡Œ sql è¯­å¥, å¹¶è·å–ç»“æœé›†
</span><span style="color:#75715e"></span>            res <span style="color:#f92672">=</span> preparedStatement<span style="color:#f92672">.</span><span style="color:#a6e22e">executeQuery</span><span style="color:#f92672">();</span>

            <span style="color:#75715e">// æ‰“å°ç»“æœé›†
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>res<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> id <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
                String name <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span>2<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">int</span> age <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span>3<span style="color:#f92672">);</span>

                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Id: &#34;</span> <span style="color:#f92672">+</span> id <span style="color:#f92672">+</span>
                    <span style="color:#e6db74">&#34;Name: &#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> 
                    <span style="color:#e6db74">&#34;Age: &#34;</span> <span style="color:#f92672">+</span> age<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            scanner<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            JDBCUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">(</span>con<span style="color:#f92672">,</span> preparedStatement<span style="color:#f92672">,</span> res<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>ä»ä¸Šé¢ä»£ç å¯çœ‹å‡ºï¼Œåœ¨è·å– preparedStatement æ—¶å°±è¦ä¼ å…¥ sql è¯­å¥ï¼Œä¸”ä½¿ç”¨çš„æ˜¯ <code>prepareStatement(sql)</code> æ–¹æ³•ï¼Œç„¶åå†é€šè¿‡ setter æ¥è®¾ç½®å¯¹åº”å ä½ç¬¦çš„å‚æ•°ï¼Œæœ€åå†æ‰§è¡Œ sql è¯­å¥ã€‚ä¸ Statement ç›¸åŒçš„æ˜¯ï¼Œæ‰§è¡Œ sql è¯­å¥æ‰€ç”¨çš„æ–¹æ³•åæ˜¯ä¸€æ ·çš„ã€‚</p>

  

  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>About</h4>
    <p dir="auto">æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ï¼Œè¿™æ˜¯æˆ‘çš„ <a href="https://github.com/junq0420">Github</a></p>
  </section>
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/2022/08/linux_cmd/">Linux_cmd</a></li>

<li><a href="/2022/08/git_basic/">Git_basic</a></li>

<li><a href="/2022/08/jpa/">JPA</a></li>

<li><a href="/2022/06/generics/">Generics</a></li>

<li><a href="/2022/05/makefile/">Makefile</a></li>

    </ol>
  </section>

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://www.bilibili.com/">Bilibili</a></li>
      
      <li><a href="https://www.google.com">Google</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p dir="auto">
      
      é™¤éç‰¹åˆ«å£°æ˜, æœ¬ç«™é‡‡ç”¨æŠ€æœ¯ <a href="https://gohugo.io/">Hugo</a> &amp; ä¸»é¢˜ <a href="https://themes.gohugo.io/themes/hugo-theme-bootstrap4-blog/">hugo-theme-bootstrap4-blog</a>.
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
