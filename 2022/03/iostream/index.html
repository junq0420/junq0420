<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta property="og:title" content="IOStream" />
<meta property="og:description" content="è®°å½• File class å’Œ IO Stream" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://junq0420.github.io/2022/03/iostream/" />
<meta property="article:published_time" content="2022-03-14T09:25:37+08:00" />
<meta property="article:modified_time" content="2022-03-14T09:25:37+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="IOStream"/>
<meta name="twitter:description" content="è®°å½• File class å’Œ IO Stream"/>
<meta name="generator" content="Hugo 0.84.0" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "IOStream",
  "url": "https://junq0420.github.io/2022/03/iostream/",
  "wordCount": "1386",
  "datePublished": "2022-03-14T09:25:37+08:00",
  "dateModified": "2022-03-14T09:25:37+08:00",
  "author": {
    "@type": "Person",
    "name": "Jun qiang"
  },
  "keywords": "Java, Java_Advance"
}
</script>



    <link rel="canonical" href="https://junq0420.github.io/2022/03/iostream/">

    <title>IOStream | My Blog</title>

    
    <!-- combined, minified CSS -->
    
    <link href="https://junq0420.github.io/css/style.160a3bda53be859332fff3fc376b5fd76a285126483463aa2e24a17ae1bcae4c.css" rel="stylesheet" integrity="sha256-Fgo72lO&#43;hZMy//P8N2tf12ooUSZINGOqLiSheuG8rkw=" crossorigin="anonymous">
    

    <!-- minified Font Awesome for SVG icons -->
    
    <script defer src="https://junq0420.github.io/js/fontawesome.min.f5072c55a0721857184db93a50561d7dc13975b4de2e19db7f81eb5f3fa57270.js" integrity="sha256-9QcsVaByGFcYTbk6UFYdfcE5dbTeLhnbf4HrXz&#43;lcnA=" crossorigin="anonymous"></script>

    <!-- RSS 2.0 feed -->
    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="https://junq0420.github.io">Home</a>
          
          <a class="nav-link" href="/archives/" title="">Archives</a>
          
          
          <a class="nav-link" href="/categories/" title="">Categories</a>
          
          
          <a class="nav-link" href="/tags/" title="">Tags</a>
          
        </nav>
      </div>
    </div>
    

    
    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title" dir="auto"><a href="https://junq0420.github.io" rel="home">My Blog</a></h1>
        <p class="lead blog-description" dir="auto"><ul>
<li>ä¿æŒå…´è¶£ï¼ŒæŒç»­å­¦ä¹  :)</li>
</ul>
</p>
      </div>
    </header>
    
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://junq0420.github.io/2022/03/iostream/">IOStream</a></h2>
    <p class="blog-post-meta">
<time datetime="2022-03-14T09:25:37+08:00">2022-03-14</time>
 in 
<span class="fas fa-folder" aria-hidden="true"></span>&nbsp;<a href="/categories/java/" rel="category tag">Java</a>


<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/java_advance/" rel="tag">Java_Advance</a>

</p>
  </header>
  <p>è®°å½• File class å’Œ IO Stream</p>

<blockquote>
<p><strong>å­¦ä¹ ç¬”è®°ï¼Œä»…ä¾›å‚è€ƒ</strong></p>

<p><strong>å‚è€ƒ</strong>ï¼š<a href="https://www.yuque.com/books/share/ddbdba56-dc9f-4997-9e18-d9e69309d343/wgctzt">Bç«™Mirco_Frank - java è¿›é˜¶</a> | <a href="https://docs.oracle.com/javase/9/docs/api/index.html?overview-summary.html">å®˜æ–¹æ–‡æ¡£è‹±æ–‡ç‰ˆ</a></p>
</blockquote>

<hr />

<style>
.icon {
    position: fixed;
    opacity: 50%;
    margin-top: 40%;
    margin-left: 90%;
}
</style>

<p><a name="return-top"></a>
        <div class="icon">
            <a href="#return-top">
                <img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/scroll_top.jpg
" alt="row" height="50px">
            </a>
        </div></p>

<hr />

<h2 id="ç›®å½•">ç›®å½•</h2>

<ul>
<li><p><a href="#FileClass">File class</a></p></li>

<li><p><a href="#I/OStream">I/O Stream</a></p>

<ul>
<li><p><a href="#å­—èŠ‚æµ">å­—èŠ‚æµ</a></p></li>

<li><p><a href="#æ–‡ä»¶å­—èŠ‚æµ">æ–‡ä»¶å­—èŠ‚æµ</a></p></li>

<li><p><a href="#ç¼“å†²å­—èŠ‚æµ">ç¼“å†²å­—èŠ‚æµ</a></p></li>

<li><p><a href="#å­—ç¬¦æµ">å­—ç¬¦æµ</a></p></li>

<li><p><a href="#è½¬æ¢æµ">è½¬æ¢æµ</a></p></li>

<li><p><a href="#æ•°æ®æµ">æ•°æ®æµ</a></p></li>

<li><p><a href="#å¯¹è±¡æµ">å¯¹è±¡æµ</a></p></li>
</ul></li>
</ul>

<hr />

<h2 id="a-name-fileclass-file-class-a">ğŸ§· <a name="FileClass">File class</a></h2>

<p>File ç±»æ˜¯å¯¹ä¸€ä¸ªæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶è·¯å¾„çš„æŠ½è±¡è¡¨ç¤ºï¼Œæ–‡ä»¶è·¯å¾„å¯ä»¥æ˜¯ <strong>ç»å¯¹è·¯å¾„</strong> (absolute path)æŠ‘æˆ–æ˜¯ <strong>ç›¸å¯¹è·¯å¾„</strong> (relative path)</p>

<p>ä¸åŒæ“ä½œç³»ç»Ÿä¸‹ï¼Œæ–‡ä»¶è·¯å¾„çš„åˆ†éš”ç¬¦ä¼šä¸åŒï¼Œ<code>Unix</code> ä¸‹ç”¨ <code>/</code>; è€Œ <code>Win 10</code> ä¸‹ç”¨ <code>\\</code></p>

<h3 id="æ„é€ å™¨">æ„é€ å™¨</h3>

<p><code>File(String pathname)</code> &emsp; // å°†æ‰€ç»™çš„æ–‡ä»¶åè½¬ä¸ºæŠ½è±¡è·¯å¾„</p>

<h3 id="æ–¹æ³•">æ–¹æ³•</h3>

<p><a href="https://www.javatpoint.com/java-file-class">ç»ƒä¹  file class</a></p>

<ul>
<li><p><strong><em><code>canExecute() | canRead() | canWrite()</code></em></strong> &emsp; // åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ | å¯è¯» | å¯å†™</p></li>

<li><p><strong><em><code>length()</code></em></strong> &emsp; // è¿”å›æ‰€ç»™æ–‡ä»¶çš„å­—ç¬¦é•¿åº¦</p></li>

<li><p><strong><em><code>exists()</code></em></strong> &emsp; // åˆ¤æ–­æ‰€ç»™çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨</p></li>

<li><p><strong><em><code>isAbsolute() | isDirectory() | isFile() | isHidden()</code></em></strong> &emsp; // åˆ¤æ–­æ–‡ä»¶è·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ | è¯¥æ–‡ä»¶æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ | æ˜¯å¦æ˜¯æ–‡ä»¶ | æ˜¯å¦æ˜¯éšè—æ–‡ä»¶</p></li>

<li><p><strong><em><code>createNewFile()</code></em></strong> &emsp; // è¿”å› true è¡¨æ˜è¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä»¥è¯¥æ–‡ä»¶åä¸ºååˆ›å»ºæ–°çš„ç©ºæ–‡ä»¶ï¼›è¿”å› false è¡¨æ˜è¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼›ç”¨æ—¶è¿˜è¦å¤„ç† IOException</p></li>

<li><p><strong><em><code>delete()</code></em></strong> &emsp; // åˆ é™¤è¯¥æ–‡ä»¶/æ–‡ä»¶å¤¹</p></li>

<li><p><strong><em><code>mkdir()</code></em></strong> &emsp; // ä»¥è¯¥æŠ½è±¡è·¯å¾„ååˆ›å»ºæ–‡ä»¶å¤¹</p></li>

<li><p><strong><em><code>getCanonicalFile()</code></em></strong> &emsp; // è·å–è¯¥æ–‡ä»¶çš„è§„èŒƒå½¢å¼æ–‡ä»¶ï¼Œå³ç»å¯¹è·¯å¾„ä¸”å”¯ä¸€çš„ï¼Œä¸æ“ä½œç³»ç»Ÿæœ‰å…³ï¼›åŒæ ·è¦å¤„ç†å¼‚å¸¸</p></li>

<li><p><strong><em><code>getAbsolutePath()</code></em></strong> &emsp; // è·å–è¯¥æ–‡ä»¶çš„ç»å¯¹è·¯å¾„å­—ç¬¦ä¸²</p></li>

<li><p><strong><em><code>getName()</code></em></strong> &emsp; // è·å–è¯¥æ–‡ä»¶/æ–‡ä»¶å¤¹çš„å</p></li>

<li><p><strong><em><code>getParent()</code></em></strong> &emsp; // è¿”å›æ­¤æ–‡ä»¶çš„çˆ¶ç›®å½•çš„è·¯å¾„åå­—ç¬¦ä¸²ï¼Œå¦‚æœæ­¤è·¯å¾„åæœªå‘½åçˆ¶ç›®å½•ï¼Œåˆ™è¿”å› nullã€‚</p></li>

<li><p><strong><em><code>getPath()</code></em></strong> &emsp; // è·å–æ–‡ä»¶çš„è·¯å¾„å</p></li>

<li><p><strong><em><code>list()</code></em></strong> &emsp; // éå†è·å–æ­¤æŠ½è±¡è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›</p></li>

<li><p><strong><em><code>listFile()</code></em></strong> &emsp; // éå†è·å–æ­¤æŠ½è±¡è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ï¼Œå¹¶ä»¥ File çš„å½¢å¼è¿”å›</p></li>
</ul>

<hr />

<h2 id="a-name-i-ostream-i-o-stream-a">ğŸŒ  <a name="I/OStream">I/O Stream</a></h2>

<p><strong><code>I</code></strong>: input source; &emsp; <strong><code>O</code></strong>: output distination;  &emsp; <strong><code>Stream</code></strong>: the process/pipe (from source to dist or from dist to source) and it support many different kinds of data, include: <em>bytes</em>, <em>primitive data types</em>, <em>localized characters</em>, and <em>objects</em>.</p>

<p><a href="https://docs.oracle.com/javase/tutorial/essential/io/streams.html">å®˜æ–¹æ•™ç¨‹è§£é‡Š I/O Stream</a></p>

<p>ä¸‹é¢ä»¥æ°´åº“è¾“æ°´æ¥è¯´æ˜æµçš„è¿‡ç¨‹</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/Water_stream_exp.jpg" alt="Water_stream_exp" /></p>

<p>è¾“å…¥è¾“å‡ºæ˜¯æœ‰ç›¸å¯¹æ€§çš„ï¼Œå¯ä»¥ä» src åˆ° dist, æˆ–è€… dist åˆ° src</p>

<p>æ¥ç€æ¥æ¢è®¨ç¨‹åºä¸­çš„ IO æµæ¦‚å¿µï¼Œåœ¨<code>ç¨‹åºä¸­æµå°±æ˜¯ä¸€ä¸²æ•°æ®</code>ï¼Œå½“ç¨‹åºè¦ <code>ä»æºè¯»å–æ•°æ®</code> æ—¶å°±è¦ä½¿ç”¨ <strong><code>input</code></strong>; å½“ç¨‹åºè¦ <code>å‘æºå†™å…¥æ•°æ®</code> æ—¶å°±è¦ä½¿ç”¨ <strong><code>output</code></strong>ã€‚æ‰€ä»¥ä¸€åˆ‡éƒ½æ˜¯ä»¥ç¨‹åºä¸ºä¸»ï¼Œä»¥å®ƒä½œä¸ºä¸»è§’ï¼Œè¾“å…¥è¾“å‡ºéƒ½æ˜¯ç›¸å¯¹å®ƒè€Œè¨€çš„ã€‚</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/Input_output_difference.jpg" alt="IO" /></p>

<p>å›¾ç‰‡æ¥è‡ª<a href="https://docs.oracle.com/javase/tutorial/essential/io/streams.html">å®˜ç½‘æ–‡æ¡£</a></p>

<p>ä»å›¾ç‰‡ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæ•°æ®æº/æ•°æ®ç›®æ ‡å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼šå¦ä¸€ä¸ªç¨‹åºã€æ–‡ä»¶ã€æ•°æ®åº“ç­‰</p>

<hr />

<h3 id="a-name-å­—èŠ‚æµ-å­—èŠ‚æµ-a-inputstream-å’Œ-outputstream"><a name="å­—èŠ‚æµ">å­—èŠ‚æµ</a> InputStream å’Œ OutputStream</h3>

<p>InputStream æ˜¯æŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰å­—èŠ‚è¾“å…¥ç±»çš„çˆ¶ç±»ï¼›åŒæ ·ï¼ŒOutputStream æ˜¯æ‰€æœ‰å­—èŠ‚è¾“å‡ºç±»çš„çˆ¶ç±»ã€‚æ‰€æœ‰çš„ <strong>å­—èŠ‚æµç±»</strong> éƒ½æ˜¯ç»§æ‰¿è‡ªä»–ä¿©</p>

<p>InputStream çš„å¸¸ç”¨æ–¹æ³•ï¼š<code>close()</code> - å½“ç¨‹åºä¸åœ¨è¯»æ•°æ®æ—¶ï¼Œå…³é—­è¾“å…¥æµï¼›<code>read()</code> - ä»è¾“å…¥æµä¸­è¯»å–ä¸‹ä¸ªå­—èŠ‚</p>

<p>OutputStream çš„å¸¸ç”¨æ–¹æ³•ï¼š<code>close()</code> - å½“ç¨‹åºä¸åœ¨å†™æ•°æ®æ—¶ï¼Œå…³é—­è¾“å‡ºæµï¼›<code>write(int b)</code> - å†™å­—èŠ‚åˆ°è¾“å‡ºæµä¸­</p>

<p>å› ä¸ºæŠ½è±¡ç±»çš„å­ç±»ä¼šé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ–¹æ³•ä¹Ÿæ˜¯å…¶å­ç±»å¸¸ç”¨çš„</p>

<hr />

<h3 id="a-name-æ–‡ä»¶å­—èŠ‚æµ-fileinputstream-å’Œ-fileoutputstream-a"><a name="æ–‡ä»¶å­—èŠ‚æµ">FileInputStream å’Œ FileOutputStream</a></h3>

<p>å®ƒä¿©ç”¨äºè¯»æ–‡ä»¶æˆ–å†™æ–‡ä»¶ï¼Œé€šè¿‡å­—èŠ‚çš„å½¢å¼æ¥å®Œæˆã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileInputStreamTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆ›å»ºæ–‡ä»¶æµ
</span><span style="color:#75715e"></span>        FileInputStream in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/text.txt&#34;</span><span style="color:#f92672">);</span>

        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>            
            <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>
            <span style="color:#75715e">// è¯»å–æ–‡ä»¶æµæºæ–‡ä»¶ä¸­çš„æ•°æ®åˆ°ç¨‹åºä¸­
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>c <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// å°†ä»æ–‡ä»¶æµä¸­è·å–çš„å­—èŠ‚å¼ºè½¬ä¸º char å‹
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// ç„¶åå°†å…¶è¾“å…¥
</span><span style="color:#75715e"></span>                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">((</span><span style="color:#66d9ef">char</span><span style="color:#f92672">)</span> c<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
           <span style="color:#75715e">// è¯»å–ä¹‹åï¼Œå…³é—­æ‰€ç”¨çš„æ–‡ä»¶æµ
</span><span style="color:#75715e"></span>           <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>in <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
               in<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
           <span style="color:#f92672">}</span>
       <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>å…¶ä¸­ç”¨åˆ° <code>read()</code> æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸‹ä¸ªæ•°æ®çš„å­—èŠ‚ï¼Œè¦æ˜¯åˆ°åº•äº†å°±è¿”å› -1ï¼›è¿˜æœ‰ä¸è®ºå¦‚ä½•æœ€åéƒ½è¦å…³æµï¼Œä»¥é˜²æ­¢æ•°æ®æ³„éœ²</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileOutputStreamTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆ›å»ºè¾“å‡ºæµ
</span><span style="color:#75715e"></span>        FileOutputStream out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">);</span>

        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// å› ä¸ºæ˜¯å­—èŠ‚æµå†™å…¥ï¼Œæ‰€ä»¥è¦å°†æ‰€å†™çš„ String è½¬ä¸ºå­—èŠ‚æ•°ç»„
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> bytes <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello World!&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">();</span>
            <span style="color:#75715e">// å°†ç¨‹åºä¸­çš„å­—èŠ‚å†™å…¥åˆ°è¾“å‡ºæµçš„ç›®æ ‡æ–‡ä»¶ä¸­
</span><span style="color:#75715e"></span>            out<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>bytes<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>out <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// å†™å¥½ä¹‹åï¼Œå…³é—­è¾“å‡ºæµ
</span><span style="color:#75715e"></span>                out<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>ç”¨ <code>write()</code> æ–¹æ³•å°†æ•°æ®å†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œæ”¾è¿˜æœ‰å‡ ä¸ªé‡è½½çš„æ–¹æ³•ï¼Œä»¥æ»¡è¶³ä¸åŒå­—èŠ‚ç±»å‹è¾“å…¥</p>

<p>æœ‰äº†è¯»å–å’Œå†™å…¥ï¼Œå°±å¯ä»¥æ»¡è¶³å¯¹æ–‡ä»¶çš„è¯»å†™è¦æ±‚äº†ï¼Œåé¢åªæ˜¯å¯¹æ€§èƒ½çš„æå‡ã€‚é€šè¿‡è¯»å†™è¿˜å¯ä»¥å®Œæˆæ–‡ä»¶çš„ copy æ“ä½œ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileCopyTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆ›å»ºè¾“å…¥è¾“å‡ºæµ
</span><span style="color:#75715e"></span>        FileInputStream in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/input.txt&#34;</span><span style="color:#f92672">)</span>
        FileOutputStream out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">);</span>

        <span style="color:#75715e">// ä» src ä¸­è¯»å‘ dist ä¸­å†™
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>
            <span style="color:#75715e">// å•å­—èŠ‚è¯»å–
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>c <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>in <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                in<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>out <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<hr />

<p>ä¸Šé¢æ‰€ç”¨çš„æ˜¯å•ä¸ªå­—èŠ‚æ¥è¿›è¡Œæ•°æ®çš„è¯»å†™ï¼Œå°±åƒæ¬ç –ä¸€æ ·ï¼Œä¸€æ¬¡åªæ¬ä¸€å—ç –å°±ä¼šæ˜¾å¾—æ•ˆç‡å¤ªä½ã€‚æ‰€ä»¥å¼•å…¥ä¸€ä¸ª byte[] ç±»å‹çš„ buffer æ¥å¢åŠ ä¸€æ¬¡æ¬è¿çš„å®¹é‡ï¼Œå°±åƒä¸€æ¬¡æ¬åå—ç –ä¸€æ ·ï¼Œæ•ˆç‡å°±ä¼šæé«˜å¾ˆå¤šã€‚ä¸‹é¢å°±æ¥çœ‹çœ‹ä»£ç çš„å®ç°</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileCopyTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆ›å»ºè¾“å…¥è¾“å‡ºæµ
</span><span style="color:#75715e"></span>        FileInputStream in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/input.txt&#34;</span><span style="color:#f92672">)</span>
        FileOutputStream out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">);</span>

        <span style="color:#75715e">// è¯»å–æ•°æ®åˆ°ç¼“å­˜åŒºï¼Œç¼“å­˜åŒºå¤§å°ä¸º 1KB
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> buff <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[</span>1024<span style="color:#f92672">];</span>
            <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>
            
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>c <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">(</span>buff<span style="color:#f92672">))</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>buff<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> c<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>in <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                in<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>out <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>ä»ä¸Šè¿°ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ° buffer çš„å¤§å°è¢«è®¾ç½®ä¸º 1024 bytes(1KB)ï¼ŒåŒæ—¶è¿˜ç”¨åˆ°äº† <code>read(byte[] b)</code> å’Œ <code>write(byte[], int off, int len)</code> çš„é‡è½½æ–¹æ³•ï¼Œ</p>

<ul>
<li><p><code>read(byte[] b)</code> &emsp; // è¯»å–æ•°æ®åˆ° byte æ•°ç»„ä¸­ï¼Œå¹¶è¿”å›æ‰€è¯»åˆ°çš„æ€»å­—èŠ‚æ•°(å³ 1024, æ•°ç»„çš„å¤§å°)ï¼Œè‹¥æ²¡è¯»åˆ°å°±è¿”å› -1</p></li>

<li><p><code>write(byte[] b, int off, int len)</code> &emsp; // å°†å­—èŠ‚æ•°ç»„å†™åˆ°è¾“å‡ºæµä¸­ï¼Œoff æŒ‡è¦ä»æ•°ç»„çš„å“ªå¼€å§‹å†™ï¼Œlen æŒ‡è¦å†™å…¥å¤šå¤§çš„å­—èŠ‚</p></li>
</ul>

<h3 id="a-name-ç¼“å†²å­—èŠ‚æµ-bufferedinputstream-å’Œ-bufferedoutputstream-a"><a name="ç¼“å†²å­—èŠ‚æµ">BufferedInputStream å’Œ BufferedOutputStream</a></h3>

<p>Java ä½œä¸ºé«˜çº§è¯­è¨€ï¼Œè‡ªç„¶æœ‰ç›´æ¥å¯ä»¥ç”¨çš„å­—èŠ‚ç¼“å­˜è¯»å†™ç±»ï¼Œå®ƒä»¬å°±æ˜¯ BufferedInputStream å’Œ BufferedOutputStream ï¼Œå…¶å®æ˜¯å®ƒä»¬çš„å†…éƒ¨æ–°å»ºäº†ä¸€ä¸ª byte æ•°ç»„ï¼ŒåŸç†ä¸Šè·Ÿä¸Šé¢çš„å·®ä¸å¤šï¼Œåªæ˜¯å®ƒä»¬ä½¿ç”¨èµ·æ¥è¦æ›´åŠ åœ°æ–¹ä¾¿</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileCopyTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆ›å»ºå­—èŠ‚ç¼“å­˜è¾“å…¥è¾“å‡ºæµ
</span><span style="color:#75715e"></span>        BufferedInputStream buffIn <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedInputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/input.txt&#34;</span><span style="color:#f92672">));</span>
        BufferedOutputStream buffOut <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedOutputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">));</span>

        <span style="color:#75715e">// è¯»å–æ•°æ®
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>

            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>c <span style="color:#f92672">=</span> buffIn<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                buffOut<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>in <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                in<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>out <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>ç”±äº <code>BufferedInputStream(InputStream in)</code> æ„é€ å™¨è¦æ¥å—ä¸€ä¸ªè¾“å…¥æµï¼Œæ‰€ä»¥ç”¨åˆ° <code>new FileInputStream(&quot;xx/input.txt&quot;)</code> æ¥ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶è¾“å…¥æµï¼Œoutput åŒç†ã€‚æœ¬æ¥ç”¨ FileInputStream å°±å¯ä»¥å®Œæˆè¯»å†™ï¼Œä¸ºäº†è®©è¯»å†™æ›´åŠ é«˜æ•ˆï¼Œç›¸å½“äºç»™ FileInputStream å¯¹è±¡å¼€äº†ä¸ª VIP ä¸€æ ·ã€‚æ‰€ä»¥è¦æƒ³å¼€ VIPï¼Œä½ å¾—å…ˆè¦æ³¨å†Œè´¦å·(FileInputStream å¯¹è±¡)ï¼Œåœ¨è®¾è®¡æ¨¡å¼ä¸­è¿™ç§ç±»ä¼¼å‡çº§ VIP çš„æœåŠ¡å« <code>è£…é¥°è®¾è®¡æ¨¡å¼</code></p>

<p>å¿ƒè¡€æ¥æ½®ï¼Œé¡ºä¾¿ç®€è¦æµ‹è¯•äº†å•å­—èŠ‚è¯»å†™ã€æ‰‹å†™ç¼“å­˜åŒºè¯»å†™ã€è‡ªå¸¦ç¼“å­˜åŒºè¯»å†™ä¸‰ç§è¯»å†™æ‰€æ¶ˆè€—çš„æ—¶é—´</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/Buffered_spend_time.jpg" alt="spend-time" /></p>

<p>ç”±å›¾å¯çŸ¥ï¼Œç¼“å­˜åŒºè¯»å†™å¤§çº¦æ˜¯å•å­—èŠ‚è¯»å†™çš„ååˆ†ä¹‹ä¸€ï¼Œè€Œæ‰‹å†™çš„ç¼“å­˜åŒºè¦ç¨æ…¢äºè‡ªå¸¦çš„ï¼Œå¯èƒ½æ˜¯å†…éƒ¨å»ºçš„ byte æ•°ç»„åº•å±‚ä¼˜åŒ–çš„å¥½</p>

<hr />

<h3 id="a-name-å­—ç¬¦æµ-å­—ç¬¦æµ-a-reader-writer"><a name="å­—ç¬¦æµ">å­—ç¬¦æµ</a> Reader &amp; Writer</h3>

<p>é™¤äº†å­—èŠ‚æµå¤–ï¼Œè¿˜æœ‰å­—ç¬¦æµï¼Œä½†å®è´¨ä¸Šå­—ç¬¦è¿˜æ˜¯ç”¨å­—èŠ‚æ¥è¡¨ç¤ºã€‚ä¸ºäº†æ›´æ–¹ä¾¿åœ°å¤„ç†å­—ç¬¦æ–‡æœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥æœ‰äº† <code>Reader &amp; Writer</code>ã€‚ä¸ä¹‹å‰çš„ <code>InputStream &amp; OutputStream</code> ä¸€æ ·ï¼Œå®ƒä»¬ä¹Ÿæ˜¯æŠ½è±¡çš„ï¼Œæ‰€æœ‰çš„ <strong>å­—ç¬¦æµ</strong> ç±»éƒ½ç»§æ‰¿è‡ªä»–ä¿©ã€‚</p>

<p>é€šå¸¸å­—ç¬¦æµç”¨æ¥è¯»å†™æ–‡æœ¬æ–‡ä»¶æ›´æ–¹ä¾¿ï¼Œå­—èŠ‚æµæ¥è¯»å†™è§†é¢‘ã€éŸ³é¢‘ã€å›¾ç‰‡ç­‰æ ¼å¼çš„æ–‡ä»¶æ›´æ–¹ä¾¿ï¼Œè¯¦ç»†æŸ¥çœ‹<a href="https://www.zhihu.com/question/39262026">å­—ç¬¦æµä¸å­—èŠ‚æµçš„åŒºåˆ«</a></p>

<p>åŒæ ·æä¾›äº†ä¸€äº›è¯»å†™å¿…è¦çš„æ–¹æ³• <code>close()</code>, <code>read()</code>, <code>write()</code></p>

<h3 id="filereader-filewriter">FileReader &amp; FileWriter</h3>

<p>å®ƒä¿©å…·ä½“å®ç° Reader &amp; Writer ç±»</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileReaderTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// æ–°å»ºè¾“å…¥æµ
</span><span style="color:#75715e"></span>        FileReader fr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileReader<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/input.txt&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">// è¯»å–æ•°æ®
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> c<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>c <span style="color:#f92672">=</span> fr<span style="color:#f92672">.</span><span style="color:#a6e22e">read</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">((</span><span style="color:#66d9ef">char</span><span style="color:#f92672">)</span> c<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>fr <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            fr<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**********************åˆ†å‰²çº¿*********************/</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fileWriterTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆ›å»ºè¾“å‡ºæµ
</span><span style="color:#75715e"></span>        FileWriter fr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileWriter<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">// å†™å…¥æ•°æ®ï¼ˆç›´æ¥å°†è¦å†™çš„å­—ç¬¦ä¸²ä¸¢è¿›å»å³å¯ï¼‰
</span><span style="color:#75715e"></span>        fw<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello world&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>fw <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            fw<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/***************åˆ†å‰²çº¿********************/</span>

<span style="color:#75715e">// å¤åˆ¶çš„æ“ä½œä¸å­—èŠ‚æµå¤åˆ¶çš„ä¸€æ ·ï¼Œä¹Ÿæ˜¯è¾¹è¯»è¾¹å†™
</span><span style="color:#75715e">// åªä¸è¿‡åªèƒ½è¯»å†™æ–‡æœ¬æ–‡ä»¶
</span><span style="color:#75715e"></span>    </code></pre></div>
<p>åŒæ ·ï¼Œä¸ºäº†è®©è¯»å†™æ›´é«˜æ•ˆï¼Œæœ‰äº† <code>BufferedReader &amp; BufferedWriter</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">bufferedReaderTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// æ–°å»ºè¾“å…¥æµ
</span><span style="color:#75715e"></span>        BufferedReader buffReader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Reader<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/input.txt&#34;</span><span style="color:#f92672">));</span>
        <span style="color:#75715e">// ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¯»å–æ•°æ®
</span><span style="color:#75715e"></span>        String str<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>str <span style="color:#f92672">=</span> buffReader<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>buffReader <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            buffReader<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>BufferedReader å¯ä»¥ä½¿ç”¨ <code>readLine()</code> æ–¹æ³•æ¥è¯»å–ï¼Œè¦æ‰“å°æ—¶å°±è¦æ˜¯ç”¨ <code>System.out.println()</code> æ¥æ‰“å°ï¼Œå¦åˆ™æ–‡æœ¬ä¸­çš„å›è½¦æ¢è¡Œå°±ä¼šä¸æ˜¾ç¤º</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">bufferedWriterTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// æ–°å»ºè¾“å…¥æµ
</span><span style="color:#75715e"></span>        BufferedWriter buffWriter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedWriter<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Writer<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">));</span>
        <span style="color:#75715e">// ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å†™å…¥æ•°æ®
</span><span style="color:#75715e"></span>        buffWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello&#34;</span><span style="color:#f92672">);</span>
        buffWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">newLine</span><span style="color:#f92672">();</span>  <span style="color:#75715e">// ç”¨è¯¥æ–¹æ³•å†™å…¥æ¢è¡Œï¼Œé˜²æ­¢ä¸åŒç³»ç»Ÿçš„æ¢è¡Œç¬¦ä¸åŒè€Œå¼•èµ·é”™è¯¯
</span><span style="color:#75715e"></span>        buffWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;world!&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>buffWriter <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            buffWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>å¤åˆ¶çš„è¯ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸‹é¢ä»…åˆ—å‡ºè¯»å†™æ•°æ®çš„éƒ¨åˆ†</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// å®šä¹‰å­—ç¬¦ä¸²å˜é‡æ¥æ¥æ”¶è¯»å–åˆ°çš„æ•°æ®
</span><span style="color:#75715e"></span>String str<span style="color:#f92672">;</span>
<span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>str <span style="color:#f92672">=</span> buffReader<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    buffWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
    buffWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">newLine</span><span style="color:#f92672">();</span>  <span style="color:#75715e">// æ¯å†™ä¸€è¡Œæ•°æ®æ¢ä¸€è¡Œ
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span></code></pre></div>
<hr />

<h3 id="a-name-è½¬æ¢æµ-è½¬æ¢æµ-a-inputstreamreader-outputstreamwriter"><a name="è½¬æ¢æµ">è½¬æ¢æµ</a> (InputStreamReader &amp; OutputStreamWriter)</h3>

<p>å®ƒä¿©æ˜¯ä½œä¸ºå­—èŠ‚å’Œå­—ç¬¦ç›¸äº’è½¬æ¢çš„æ¡¥æ¢ï¼Œé€šè¿‡ <code>InputStreamReader</code> å¯ä»¥å°†æ–‡ä»¶ä¸­çš„å­—èŠ‚è½¬ä¸ºå­—ç¬¦ï¼Œç„¶åè¿›è¡Œè¯»å–ï¼›åŒæ ·ï¼Œ<code>OutputStreamWriter</code> æ˜¯å°†å†™å…¥çš„å­—ç¬¦è½¬ä¸ºå­—èŠ‚ï¼Œç„¶åæ”¾å…¥æ–‡ä»¶ä¸­è¿›è¡Œå­˜å‚¨ã€‚</p>

<p>ä½¿ç”¨åœºåˆï¼š</p>

<ol>
<li><p>æºæˆ–ç›®æ ‡æ‰€å¯¹åº”çš„è®¾å¤‡æ˜¯å­—èŠ‚æµï¼Œä½†æ“ä½œçš„ç¡®å®æ–‡æœ¬æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨å…¶æ¥ä½œä¸ºæ¡¥æ¢</p></li>

<li><p>ä¸€æ—¦æ“ä½œçš„æ–‡æœ¬æ¶‰åŠåˆ°å…·ä½“çš„æŒ‡å®šç¼–ç è¡¨æ—¶ï¼Œå¿…é¡»ä½¿ç”¨è½¬æ¢æµ</p></li>
</ol>

<p>ä¸‹é¢ä»¥ç³»ç»Ÿçš„è¾“å…¥è¾“å‡ºæµ(å­—èŠ‚)è¯»å†™åˆ°æ–‡æœ¬æ–‡ä»¶ä¸ºä¾‹</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     *  è¯»å–ç³»ç»Ÿè¾“å…¥ï¼ˆå­—èŠ‚ï¼‰
</span><span style="color:#75715e">     *  å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼ˆå­—ç¬¦ï¼‰
</span><span style="color:#75715e">     */</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">readTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// å°†ç³»ç»Ÿè¾“å…¥æµè½¬ä¸ºå­—ç¬¦æµè¿›è¡Œè¯»å–
</span><span style="color:#75715e"></span>        BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> InputStreamReader<span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">in</span><span style="color:#f92672">));</span>
        BufferedWriter writer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedWriter<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileWrite<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/output.txt&#34;</span><span style="color:#f92672">));</span>

        <span style="color:#75715e">// BufferedReader çš„ readLine() è·å–çš„æ˜¯å­—ç¬¦ä¸²
</span><span style="color:#75715e"></span>        String data<span style="color:#f92672">;</span>
        <span style="color:#75715e">// å½“è¯»å–ç³»ç»Ÿè¾“å…¥ä¸º â€œexitâ€ æ—¶ï¼Œåœæ­¢è¯»å–
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span> <span style="color:#e6db74">&#34;exit&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>data <span style="color:#f92672">=</span> reader<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
            writer<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>data<span style="color:#f92672">);</span>
            writer<span style="color:#f92672">.</span><span style="color:#a6e22e">newLine</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>writer <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            writer<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>reader <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            reader<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

<span style="color:#75715e">/*-----------------------åˆ†å‰²çº¿-----------------------*/</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     *  ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼ˆå­—ç¬¦ï¼‰
</span><span style="color:#75715e">     *  å†™å…¥æ•°æ®åˆ°ç³»ç»Ÿè¾“å‡ºï¼ˆå­—èŠ‚ï¼‰
</span><span style="color:#75715e">     */</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">writeTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// å°†ç³»ç»Ÿè¾“å…¥æµè½¬ä¸ºå­—ç¬¦æµè¿›è¡Œè¯»å–
</span><span style="color:#75715e"></span>        BufferedReader reader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileReader<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xx/input.txt&#34;</span><span style="color:#f92672">));</span>
        BufferedWriter writer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedWriter<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> OutputStreamWriter<span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">));</span>
        
        <span style="color:#75715e">// BufferedReader çš„ readLine() è·å–çš„æ˜¯å­—ç¬¦ä¸²
</span><span style="color:#75715e"></span>        String data<span style="color:#f92672">;</span>
        <span style="color:#75715e">// è¯»å†™æ•°æ®
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>data <span style="color:#f92672">=</span> reader<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            writer<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>data<span style="color:#f92672">);</span>
            writer<span style="color:#f92672">.</span><span style="color:#a6e22e">newLine</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>writer <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            writer<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>reader <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            reader<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<hr />

<h3 id="a-name-æ•°æ®æµ-æ•°æ®æµ-a-datainputstream-dataoutputstream"><a name="æ•°æ®æµ">æ•°æ®æµ</a> (DataInputStream &amp; DataOutputStream)</h3>

<p>æ•°æ®æµæ”¯æŒ Java çš„åŸºæœ¬ç±»å‹è¯»å†™ï¼Œä½†è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰€è¯»çš„æ–‡ä»¶å¿…é¡»æ˜¯ç”¨æ•°æ®æµ <code>DataOutputStream</code> å†™å…¥çš„æ•°æ®æ–‡ä»¶ï¼Œä¸ç„¶ä¼šé€ æˆ <strong>å­—ç¬¦ç¼–ç é—®é¢˜</strong></p>

<p><a href="https://docs.oracle.com/javase/tutorial/essential/io/datastreams.html">ä¾‹å­æ¥æºäºå®˜ç½‘æ•™ç¨‹</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡çš„æ–‡ä»¶å, æ²¡æœ‰åç¼€ï¼Œå³ä½¿ç»™äº†åç¼€æ‰“å¼€ä¹Ÿæ˜¯ä¹±ç 
</span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String dataFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;invoicedata&#34;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> *  ç”¨æ•°æ®æµå†™å…¥æ•°æ®
</span><span style="color:#75715e"> */</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">dataWriteStream</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// å®šä¹‰ä¸€äº›è¦å†™å…¥çš„å˜é‡
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">double</span><span style="color:#f92672">[]</span> prices <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>19<span style="color:#f92672">.</span><span style="color:#a6e22e">99</span><span style="color:#f92672">,</span> 9<span style="color:#f92672">.</span><span style="color:#a6e22e">99</span><span style="color:#f92672">,</span> 15<span style="color:#f92672">.</span><span style="color:#a6e22e">99</span><span style="color:#f92672">,</span> 3<span style="color:#f92672">.</span><span style="color:#a6e22e">99</span><span style="color:#f92672">,</span> 4<span style="color:#f92672">.</span><span style="color:#a6e22e">99</span><span style="color:#f92672">};</span>
        <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> units <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 12<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 13<span style="color:#f92672">,</span> 29<span style="color:#f92672">,</span> 50 <span style="color:#f92672">};</span>
        <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span> descs <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
                <span style="color:#e6db74">&#34;Java T-shirt&#34;</span><span style="color:#f92672">,</span>
                <span style="color:#e6db74">&#34;Java Mug&#34;</span><span style="color:#f92672">,</span>
                <span style="color:#e6db74">&#34;Duke Juggling Dolls&#34;</span><span style="color:#f92672">,</span>
                <span style="color:#e6db74">&#34;Java Pin&#34;</span><span style="color:#f92672">,</span>
                <span style="color:#e6db74">&#34;Java Key Chain&#34;</span>
        <span style="color:#f92672">};</span>

        <span style="color:#75715e">// create out stream and write data into specify file
</span><span style="color:#75715e"></span>        DataOutputStream out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DataOutputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> BufferedOutputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span>dataFile<span style="color:#f92672">)));</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> prices<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeDouble</span><span style="color:#f92672">(</span>prices<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
            out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeInt</span><span style="color:#f92672">(</span>units<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
            out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeUTF</span><span style="color:#f92672">(</span>descs<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>out <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            out<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

<span style="color:#75715e">/*******************åˆ†å‰²çº¿*********************/</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> *  ç”¨æ•°æ®æµè¯»å–å†™å¥½çš„æ•°æ®
</span><span style="color:#75715e"> */</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">dataReadTest</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#75715e">// create in stream and read data from specify file
</span><span style="color:#75715e"></span>        DataInputStream in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DataInputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> BufferedInputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span>dataFile<span style="color:#f92672">)));</span>
        <span style="color:#75715e">// å®šä¹‰æ¥å—ä¸åŒç±»å‹æ•°æ®çš„å˜é‡
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">double</span> price<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> unit<span style="color:#f92672">;</span>
        String desc<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// è¯»å–æ•°æ®çš„ç±»å‹è¦ä¸å†™å…¥æ—¶çš„ä¿æŒä¸€è‡´
</span><span style="color:#75715e"></span>                price <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readDouble</span><span style="color:#f92672">();</span>
                unit <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readInt</span><span style="color:#f92672">();</span>
                desc <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readUTF</span><span style="color:#f92672">();</span>
                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;You ordered %d&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; units of %s at %.2f%n&#34;</span><span style="color:#f92672">,</span> unit<span style="color:#f92672">,</span> desc<span style="color:#f92672">,</span> price<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>EOFException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span></code></pre></div>
<p><strong style="color: #4f4">æ³¨æ„</strong>:</p>

<p>DataStreams é€šè¿‡æ•è· <code>EOFException</code> æ¥æ£€æµ‹æ–‡ä»¶ç»“æŸæ¡ä»¶ï¼Œè€Œä¸æ˜¯æµ‹è¯•æ— æ•ˆçš„è¿”å›å€¼ã€‚</p>

<hr />

<h3 id="a-name-å¯¹è±¡æµ-å¯¹è±¡æµ-a-objectinputstream-objectoutputstream"><a name="å¯¹è±¡æµ">å¯¹è±¡æµ</a> (ObjectInputStream &amp; ObjectOutputStream)</h3>

<p>è·Ÿæ•°æ®æµä¸€æ ·ï¼Œå¯¹è±¡æµæ”¯æŒè¯»å†™å¯¹è±¡ï¼Œé€šè¿‡ <code>ObjectOutputStream</code> å°†å¯¹è±¡åºåˆ—åŒ–ï¼Œç„¶åå­˜å‚¨åˆ°ç£ç›˜ä¸­æˆ–å‘å¸ƒåˆ°ç½‘ä¸Šï¼Œç”¨æˆ·å†é€šè¿‡ <code>ObjectIntputStream</code> å°†æ•°æ®ååºåˆ—åŒ–ä¸ºå¯¹è±¡ï¼Œç„¶åæ“ä½œä½¿ç”¨ã€‚æ‰€ä»¥æƒ³è¦ç”¨å¯¹è±¡æµï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±å¿…é¡»æ˜¯ <strong>å®ç° <code>Serializable</code> æ¥å£ç±»çš„å®ä¾‹</strong>ã€‚</p>

<p>è·Ÿæ•°æ®æµç›¸æ¯”ï¼Œå¯¹è±¡æµçš„æ•°æ®ç±»å‹å°±æ›´åŠ çš„ä¸°å¯Œäº†ï¼Œä¸ä»…æœ‰åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œè¿˜å¯èƒ½åŒ…å«å…¶ä»–çš„å¯¹è±¡ã€‚ä¸‹é¢ä»ç„¶æ˜¯è®¢å•çš„ä¾‹å­ï¼Œåªä¸è¿‡å®ƒçš„ä»·æ ¼å±æ€§ç”¨çš„æ˜¯ <code>Math.BigDecimal</code> ç±»ï¼ŒBigDecimal ç±»æ˜¯ç”¨æ¥è®¡ç®— <strong>æ›´é«˜ç²¾åº¦è¦æ±‚çš„å°æ•°</strong>ï¼Œæ¯”å¦‚å•†ä¸šçš„é‡‘é’±äº¤æ˜“ï¼Œä½¿ç”¨å®ƒçš„ç®—æœ¯æ–¹æ³•æ¥è¿›è¡ŒåŠ å‡ä¹˜é™¤è¿ç®—ï¼Œè€Œä¸æ˜¯ç”¨è¿ç®—ç¬¦è¿ç®—ã€‚ä¸‹é¢çš„ä¾‹å­æ¥æºäº<a href="https://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html">å®˜æ–¹æ•™ç¨‹</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ObjectStreams</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// å®šä¹‰æ•°æ®
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String dataFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;invoicedata&#34;</span><span style="color:#f92672">;</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> BigDecimal<span style="color:#f92672">[]</span> prices <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 
        <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;19.99&#34;</span><span style="color:#f92672">),</span> 
        <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;9.99&#34;</span><span style="color:#f92672">),</span>
        <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;15.99&#34;</span><span style="color:#f92672">),</span>
        <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;3.99&#34;</span><span style="color:#f92672">),</span>
        <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;4.99&#34;</span><span style="color:#f92672">)</span> <span style="color:#f92672">};</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> units <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> 12<span style="color:#f92672">,</span> 8<span style="color:#f92672">,</span> 13<span style="color:#f92672">,</span> 29<span style="color:#f92672">,</span> 50 <span style="color:#f92672">};</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span> descs <span style="color:#f92672">=</span> <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;Java T-shirt&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#e6db74">&#34;Java Mug&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#e6db74">&#34;Duke Juggling Dolls&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#e6db74">&#34;Java Pin&#34;</span><span style="color:#f92672">,</span>
            <span style="color:#e6db74">&#34;Java Key Chain&#34;</span> <span style="color:#f92672">};</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> 
        <span style="color:#66d9ef">throws</span> IOException<span style="color:#f92672">,</span> ClassNotFoundException <span style="color:#f92672">{</span>

        <span style="color:#75715e">// å¯¹è±¡æµå†™æ•°æ®åˆ°æ–‡ä»¶
</span><span style="color:#75715e"></span>        ObjectOutputStream out <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectOutputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span>
                    BufferedOutputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileOutputStream<span style="color:#f92672">(</span>dataFile<span style="color:#f92672">)));</span>
            <span style="color:#75715e">// å†™å…¥æ—¥æœŸã€ä»·æ ¼ã€æ•°é‡ã€åç§°åˆ°æ–‡ä»¶
</span><span style="color:#75715e"></span>            out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeObject</span><span style="color:#f92672">(</span>Calendar<span style="color:#f92672">.</span><span style="color:#a6e22e">getInstance</span><span style="color:#f92672">());</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> prices<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i <span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeObject</span><span style="color:#f92672">(</span>prices<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeInt</span><span style="color:#f92672">(</span>units<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">writeUTF</span><span style="color:#f92672">(</span>descs<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>            out<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>

<span style="color:#75715e">/********************åˆ†å‰²çº¿****************************/</span>

        <span style="color:#75715e">// å¯¹è±¡æµä»æ–‡ä»¶ä¸­è¯»æ•°æ®
</span><span style="color:#75715e"></span>        ObjectInputStream in <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
            in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectInputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span>
                    BufferedInputStream<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span>dataFile<span style="color:#f92672">)));</span>
            <span style="color:#75715e">// å®šä¹‰æ¥æ”¶æ•°æ®çš„å˜é‡
</span><span style="color:#75715e"></span>            Calendar date <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            BigDecimal price<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> unit<span style="color:#f92672">;</span>
            String desc<span style="color:#f92672">;</span>
            BigDecimal total <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
            <span style="color:#75715e">// å…ˆæ¥æ”¶æ—¥æœŸ
</span><span style="color:#75715e"></span>            date <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Calendar<span style="color:#f92672">)</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readObject</span><span style="color:#f92672">();</span>

            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">format</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;On %tA, %&lt;tB %&lt;te, %&lt;tY:%n&#34;</span><span style="color:#f92672">,</span> date<span style="color:#f92672">);</span>
            <span style="color:#75715e">// è·Ÿæ•°æ®æµä¸€æ ·æŒ‰ç…§å†™å…¥æ—¶çš„é¡ºåºè¯»æ•°æ®
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    price <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>BigDecimal<span style="color:#f92672">)</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readObject</span><span style="color:#f92672">();</span>
                    unit <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readInt</span><span style="color:#f92672">();</span>
                    desc <span style="color:#f92672">=</span> in<span style="color:#f92672">.</span><span style="color:#a6e22e">readUTF</span><span style="color:#f92672">();</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;You ordered %d units of %s at $%.2f%n&#34;</span><span style="color:#f92672">,</span>
                            unit<span style="color:#f92672">,</span> desc<span style="color:#f92672">,</span> price<span style="color:#f92672">);</span>
                    total <span style="color:#f92672">=</span> total<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>price<span style="color:#f92672">.</span><span style="color:#a6e22e">multiply</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> BigDecimal<span style="color:#f92672">(</span>unit<span style="color:#f92672">)));</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>EOFException e<span style="color:#f92672">)</span> <span style="color:#f92672">{}</span> <span style="color:#75715e">// åŒæ ·ï¼Œç­‰æ•è·åˆ°å¼‚å¸¸åé€€å‡ºå¾ªç¯
</span><span style="color:#75715e"></span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">format</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;For a TOTAL of: $%.2f%n&#34;</span><span style="color:#f92672">,</span> total<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span> <span style="color:#75715e">// å…³æµ
</span><span style="color:#75715e"></span>            in<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>

  

  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>About</h4>
    <p dir="auto">æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ï¼Œè¿™æ˜¯æˆ‘çš„ <a href="https://github.com/junq0420">Github</a></p>
  </section>
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/2024/04/python_basic/">Python_basic</a></li>

<li><a href="/2023/06/adt/">ADT</a></li>

<li><a href="/2023/05/c_code_style/">C_Code_Style</a></li>

<li><a href="/2023/05/c_grammar_jjz/">C_Grammar_JJZ</a></li>

<li><a href="/2023/05/lvgl_port/">LVGL_Port</a></li>

    </ol>
  </section>

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://www.bilibili.com/">Bilibili</a></li>
      
      <li><a href="https://www.google.com">Google</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p dir="auto">
      
      é™¤éç‰¹åˆ«å£°æ˜, æœ¬ç«™é‡‡ç”¨æŠ€æœ¯ <a href="https://gohugo.io/">Hugo</a> &amp; ä¸»é¢˜ <a href="https://themes.gohugo.io/themes/hugo-theme-bootstrap4-blog/">hugo-theme-bootstrap4-blog</a>.
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
