<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta property="og:title" content="Git_basic" />
<meta property="og:description" content="Git 基础" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://github.com/junq0420.github.io/2022/08/git_basic/" />
<meta property="article:published_time" content="2022-08-28T09:51:16+08:00" />
<meta property="article:modified_time" content="2022-08-28T09:51:16+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git_basic"/>
<meta name="twitter:description" content="Git 基础"/>
<meta name="generator" content="Hugo 0.84.0" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Git_basic",
  "url": "http://github.com/junq0420.github.io/2022/08/git_basic/",
  "wordCount": "1008",
  "datePublished": "2022-08-28T09:51:16+08:00",
  "dateModified": "2022-08-28T09:51:16+08:00",
  "author": {
    "@type": "Person",
    "name": "Jun qiang"
  },
  "keywords": "Git"
}
</script>



    <link rel="canonical" href="http://github.com/junq0420.github.io/2022/08/git_basic/">

    <title>Git_basic | My Blog</title>

    
    <!-- combined, minified CSS -->
    
    <link href="http://github.com/junq0420.github.io/css/style.5661e2c97fcfc5e47dc9df16e3ca8a3598b1d2f4acbec96eec49c72a9d6e7a31.css" rel="stylesheet" integrity="sha256-VmHiyX/PxeR9yd8W48qKNZix0vSsvslu7EnHKp1uejE=" crossorigin="anonymous">
    

    <!-- minified Font Awesome for SVG icons -->
    
    <script defer src="http://github.com/junq0420.github.io/js/fontawesome.min.f5072c55a0721857184db93a50561d7dc13975b4de2e19db7f81eb5f3fa57270.js" integrity="sha256-9QcsVaByGFcYTbk6UFYdfcE5dbTeLhnbf4HrXz&#43;lcnA=" crossorigin="anonymous"></script>

    <!-- RSS 2.0 feed -->
    

    

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="http://github.com/junq0420.github.io">Home</a>
          
          <a class="nav-link" href="/junq0420.github.io/archives/" title="">Archives</a>
          
          
          <a class="nav-link" href="/junq0420.github.io/categories/" title="">Categories</a>
          
          
          <a class="nav-link" href="/junq0420.github.io/tags/" title="">Tags</a>
          
        </nav>
      </div>
    </div>
    

    
    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title" dir="auto"><a href="http://github.com/junq0420.github.io" rel="home">My Blog</a></h1>
        <p class="lead blog-description" dir="auto"><ul>
<li>保持兴趣，持续学习 :)</li>
</ul>
</p>
      </div>
    </header>
    
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="http://github.com/junq0420.github.io/2022/08/git_basic/">Git_basic</a></h2>
    <p class="blog-post-meta">
<time datetime="2022-08-28T09:51:16+08:00">2022-08-28</time>
 in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/junq0420.github.io/tags/git/" rel="tag">Git</a>

</p>
  </header>
  <p>Git 基础</p>

<blockquote>
<p><strong>学习笔记，仅供参考</strong></p>

<p><strong>参考</strong>：<a href="https://www.bilibili.com/video/BV1UL411V7f3?p=27&amp;spm_id_from=pageDriver&amp;vd_source=05b0eccbdf933109f51a1700f25459fa">青空の霞光视频讲解-git 部分</a> | <a href="https://www.progit.cn/">Pro Git 中文版</a> | <a href="https://git-scm.com/docs">Git 官网参考文档</a></p>

<p><strong>目录</strong>：</p>
</blockquote>

<ul>
<li>1. <a href="#section1">概念</a></li>
<li>2. <a href="#section2">基本命令</a>

<ul>
<li>2.1. <a href="#section2-1">信息配置</a></li>
<li>2.2. <a href="#section2-2">获取 git 仓库</a></li>
<li>2.3. <a href="#section2-3">仓库状态</a></li>
<li>2.4. <a href="#section2-4">添加</a></li>
<li>2.5. <a href="#section2-5">查看已暂存和未暂存的修改</a></li>
<li>2.6. <a href="#section2-6">提交</a></li>
<li>2.7. <a href="#section2-7">删除和移动文件</a></li>
<li>2.8. <a href="#section2-8">查看提交历史</a></li>
<li>2.9. <a href="#section2-9">忽略文件</a></li>
<li>2.10. <a href="#section2-10">打标签</a></li>
</ul></li>
<li>3. <a href="#section3">分支</a>

<ul>
<li>3.1. <a href="#section3-1">分支概念</a></li>
<li>3.2. <a href="#section3-2">合并</a></li>
<li>3.3. <a href="#section3-3">变基</a></li>
<li>3.4. <a href="#section3-4">优选</a></li>
</ul></li>
<li>4. <a href="#section4">远程仓库</a>

<ul>
<li>4.1. <a href="#section4-1">远程操作的一些问题</a></li>
</ul></li>
<li>5. <a href="#section5">IDEA 中使用 Git</a></li>
</ul>

<hr />

<h2 id="1-a-name-section1-a-概念">1. <a name='section1'></a>概念</h2>

<p>三种状态</p>

<ul>
<li><p>已修改(modified)，仅对文件做出修改，还未保存到库中</p></li>

<li><p>已暂存(staged)，对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中</p></li>

<li><p>已提交(commited)，文件已被安全地保存在库中</p></li>
</ul>

<p>由此引出对应的三个工作区域的概念</p>

<ul>
<li><p>工作目录，在本地能够修改、查看文件的目录，即本地的项目文件夹</p></li>

<li><p>暂存区(Index)，它是 .git 下的一个名为 index 的文件，用来保存下次提交文件的列表信息</p></li>

<li><p>Git仓库(本地仓库)，以 .git 为名的目录，远程提交和拉取项目的重要目录</p></li>
</ul>

<p>工作流程，用户先在本地仓库中创建或修改文件，然后将文件的快照保存到 index 中，接着依据 index 将快照永久性地保存在 git 仓库中。若是想要在网络上能看到文件，可将其保存到远程仓库中。大致工作流程图如下：</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/working_flow.jpg" alt="工作流程图" /></p>

<hr />

<h2 id="2-a-name-section2-a-基本命令">2. <a name='section2'></a>基本命令</h2>

<h3 id="2-1-a-name-section2-1-a-信息配置">2.1. <a name='section2-1'></a>信息配置</h3>

<p>通常在安装完 git 后，会先配置下用户信息，这样后面的提交都会带有这些信息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git config --global user.name <span style="color:#e6db74">&#34;Tom&#34;</span>
git config --global user.email <span style="color:#e6db74">&#34;tom@example.com&#34;</span>
<span style="color:#75715e"># --global 表示仅配置一次，后续直接使用</span>
git config --list  <span style="color:#75715e"># 列出git的所有配置项</span></code></pre></div>
<h3 id="2-2-a-name-section2-2-a-获取-git-仓库">2.2. <a name='section2-2'></a>获取 git 仓库</h3>

<p>两种获取 git 仓库的方法，分别是初始化本地目录将其从而创建一个 git 仓库；从网上克隆获取</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git init
<span style="color:#75715e"># 当前目录创建出 .git 目录</span>

git clone https://github.com/xxx/xx
<span style="color:#75715e"># 从 github 上克隆项目，其中在 xxx 中会初始化出 .git 目录，并将远程的数据存放其中</span></code></pre></div>
<h3 id="2-3-a-name-section2-3-a-仓库状态">2.3. <a name='section2-3'></a>仓库状态</h3>

<p>在工作目录下的文件会有两种状态：已跟踪和未跟踪。已跟踪文件是指那些已被纳入 git 管理的文件，它们会随着 git 的操作被加入到本地仓库或远程仓库中。被跟踪的文件在 git 管理中，就会是已修改、已暂存和已提交这三种状态之一。同理，未跟踪的文件就不会受 git 操作的影响，也就是普通的本地磁盘文件。</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/file_status.jpg" alt="文件的状态变化周期" /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git status  
<span style="color:#75715e"># 查看当前目录的文件状态</span></code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/git_status.jpg" alt="查看文件状态" /></p>

<p>根据上图，git status 会显示那些是已跟踪的，那些是未跟踪的，且 git 会显示出已跟踪文件的状态。同时，给出一些建议来后续操作文件</p>

<h3 id="2-4-a-name-section2-4-a-添加">2.4. <a name='section2-4'></a>添加</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git add test.txt
<span style="color:#75715e"># 将 test 文件变为已跟踪文件</span>
git add .
<span style="color:#75715e"># 将当前目录的所有文件都添加到暂存区</span>
git restore --staged test.txt
<span style="color:#75715e"># 将暂存区的文件变为未跟踪文件</span></code></pre></div>
<p>注意，命令行界面会用颜色来区分一些文件的状态，如红色指未跟踪文件或是跟踪已修改文件；绿色指跟踪已暂存文件；若已提交文件就不再显示文件的状态</p>

<h3 id="2-5-a-name-section2-5-a-查看已暂存和未暂存的修改">2.5. <a name='section2-5'></a>查看已暂存和未暂存的修改</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git diff  
<span style="color:#75715e"># 查看暂存区中已修改文件的修改内容</span>
git diff --cached
<span style="color:#75715e"># 查看暂存区中未修改文件的改动</span>
git diff --staged
<span style="color:#75715e"># 在 1.6.1 之后新增的，与 --cached 相同</span></code></pre></div>
<p>在命令显示的结果中， + 号指文件新增的内容，- 号指删除的内容</p>

<h3 id="2-6-a-name-section2-6-a-提交">2.6. <a name='section2-6'></a>提交</h3>

<p>当修改后的文件添加至暂存区后，就可将暂存区的记录改变提交到 git 仓库中。而且每次提交都会有快照记录，便于以后回滚。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git commit
<span style="color:#75715e"># 无参数的提交，它会进入 vim 界面，先显示最后 git status 的输出，然后要求输入提交说明</span>
git commit -m <span style="color:#e6db74">&#39;Initial commit&#39;</span>
<span style="color:#75715e"># -m 指在命令时就添加提交说明</span>
git commit -a -m <span style="color:#e6db74">&#39;Initial commit&#39;</span>
<span style="color:#75715e"># -a 指包含 git add 操作</span></code></pre></div>
<h3 id="2-7-a-name-section2-7-a-删除和移动文件">2.7. <a name='section2-7'></a>删除和移动文件</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git rm &lt;file&gt;
<span style="color:#75715e"># 当前目录和暂存区都将删除的 file 文件</span>
git rm log/<span style="color:#ae81ff">\*</span>.log
<span style="color:#75715e"># 删除 log 目录下所有以 log 为后缀的文件</span>
git rm -f &lt;file&gt;
<span style="color:#75715e"># 强制删除暂存区中已修改文件</span>
git rm --cached &lt;file&gt;
<span style="color:#75715e"># 删除文件，但当前目录仍保留此文件，</span>
<span style="color:#75715e"># 即将暂存区中已提交的文件变为未跟踪文件</span>

git checkout &lt;file&gt;
<span style="color:#75715e"># 恢复在当前目录下删除或修改的文件，且该文件处于 unstaged 状态</span>
git reset --hard commitId
<span style="color:#75715e"># 通过回滚来恢复 git rm 命令删除的文件</span>

git mv &lt;file&gt; &lt;new_file&gt;
<span style="color:#75715e"># 重命名文件，并在暂存区保存记录</span></code></pre></div>
<h3 id="2-8-a-name-section2-8-a-查看提交历史">2.8. <a name='section2-8'></a>查看提交历史</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git log
<span style="color:#75715e"># 列出所有的提交历史，head 指当前所处于的提交，内容包含 commitId、作者、日期和提交说明</span>
git log -p -2
<span style="color:#75715e"># -p 显示每次提交的内容差异，-2 指显示最近两次的提交</span>
git log --stat
<span style="color:#75715e"># 对每次的提交作统计</span>
git log --oneline --graph
<span style="color:#75715e"># 简要输出信息并以图形形式显示</span>
git reflog
<span style="color:#75715e"># 查看所有的提交历史</span></code></pre></div>
<h3 id="2-9-a-name-section2-9-a-忽略文件">2.9. <a name='section2-9'></a>忽略文件</h3>

<p>在 .gitignore 文件下所匹配到的文件不会被加入到 git 的管理当中。以下面的 .gitignore 为例</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 忽略所有以 a 做后缀的文件</span>
*.a

<span style="color:#75715e"># 不忽略 lib.a 文件</span>
!lib.a

<span style="color:#75715e"># 仅忽略当前目录下的 TODO 文件</span>
/TODO

<span style="color:#75715e"># 忽略 build 目录下的所有文件</span>
build/

<span style="color:#75715e"># 忽略 doc 目录下所有的 txt 文件</span>
doc/*.txt

<span style="color:#75715e"># 忽略 doc 子目录中的所有 pdf 文件</span>
doc/**/*.pdf</code></pre></div>
<h3 id="2-10-a-name-section2-10-a-打标签">2.10. <a name='section2-10'></a>打标签</h3>

<p>给某次提交打上标签来表示本次提交的文件变化，算是对提交的额外说明</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git tag
<span style="color:#75715e"># 列出所有的标签</span>
git tag -l <span style="color:#e6db74">&#39;v1.8.5*&#39;</span>
<span style="color:#75715e"># 列出 v1.8.5.x 的所有版本标签</span>
git tag -a v1.0 -m <span style="color:#e6db74">&#39;my version 1.0&#39;</span>
<span style="color:#75715e"># -a 指给当前提交(head所指的)打上标签，v1.0 指该提交的标签名，-m 为标签说明</span>
git tag -a v1.2 -m <span style="color:#e6db74">&#39;my version 1.2&#39;</span> 9fceb02
<span style="color:#75715e"># 给指定的提交打标签</span>
git show v1.0
<span style="color:#75715e"># 根据标签名来显示具体的提交信息</span>

git push origin v1.0
<span style="color:#75715e"># 默认下，git push 不会将标签传给远程服务器，所以需要手动推送</span>
git push origin --tags
<span style="color:#75715e"># 一次推送多个标签</span></code></pre></div>
<hr />

<h2 id="3-a-name-section3-a-分支">3. <a name='section3'></a>分支</h2>

<h3 id="3-1-a-name-section3-1-a-分支概念">3.1. <a name='section3-1'></a>分支概念</h3>

<p>分支本质上就是指向提交对象的可变指针，因为每次提交都会创建一个提交对象，且该对象的父对象是上次提交对象。</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/git_branch.jpg" alt="分支与提交历史" width=75%></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git branch testing
<span style="color:#75715e"># 创建一个新的分支 testing，即仅是新建一个可变指针</span>
<span style="color:#75715e"># 并且它们都能指向提交历史的任一提交对象</span>
git checkout testing
<span style="color:#75715e"># 让 head 指向 testing 分支</span>
<span style="color:#75715e"># 在切换分支时，最好确保工作目录和暂存区的文件都已提交，防止后期操作冲突</span>
git checkout -b testing
<span style="color:#75715e"># 创建并切换到新分支 testing</span>
git branch -d testing
<span style="color:#75715e"># 删除 testing 分支</span></code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/branch.jpg" alt="分支操作" /></p>

<h3 id="3-2-a-name-section3-2-a-合并">3.2. <a name='section3-2'></a>合并</h3>

<p>当 master 分支想拥有 testing 分支的提交时，就可使用合并来完成</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git merge testing
<span style="color:#75715e"># 在 master 分支下合并 testing 分支的内容</span></code></pre></div>
<p>分支也会有两种情况，一种是没分叉的；一种是分叉的</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/fast_forward.jpg" alt="快进"></p>

<p>这种一条线的情况，只会简单地让指针右移，并不需要解决分歧问题</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/merge.jpg" alt="合并"></p>

<p>这种情况就是常见的分支合并，Git 会自行决定选取哪一个提交作为最优的共同祖先，并以此作为合并的基础</p>

<p>但有时会因为 master 和 iss53 对相同文件做了不同的修改操作，从而导致合并时发生冲突，这时仅会将两个分支的内容合并，并不会提交创建一个新快照。直到手动解决文件冲突，再手动添加至暂存区和提交。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 比如下面以 master 和 testing 分支分别不同地修改 hot.txt 文件为例</span>

$ git merge testing
Auto-merging hot.txt
CONFLICT <span style="color:#f92672">(</span>content<span style="color:#f92672">)</span>: Merge conflict in hot.txt
Automatic merge failed; fix conflicts and <span style="color:#66d9ef">then</span> commit the result.
<span style="color:#75715e"># 在 master 下合并 testing 分支而发生冲突</span>

$ git status
On branch master
You have unmerged paths.
  <span style="color:#f92672">(</span>fix conflicts and run <span style="color:#e6db74">&#34;git commit&#34;</span><span style="color:#f92672">)</span>
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git merge --abort&#34;</span> to abort the merge<span style="color:#f92672">)</span>

Changes to be committed:
        modified:   hello.txt
        deleted:    test.txt

Unmerged paths:
  <span style="color:#f92672">(</span>use <span style="color:#e6db74">&#34;git add &lt;file&gt;...&#34;</span> to mark resolution<span style="color:#f92672">)</span>
        both modified:   hot.txt
<span style="color:#75715e"># 查看那些因包含合并冲突而处于未合并（unmerged）状态的文件</span>

$ git diff
diff --cc hot.txt
index 66f2795,2365a9e..0000000
--- a/hot.txt
+++ b/hot.txt
@@@ -1,3 -1,2 +1,7 @@@
  It<span style="color:#e6db74">&#39;s so hot.
</span><span style="color:#e6db74">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</span><span style="color:#e6db74"> +Test line
</span><span style="color:#e6db74"> +I want drink a juice.
</span><span style="color:#e6db74">++=======
</span><span style="color:#e6db74">+ I need water.
</span><span style="color:#e6db74">++&gt;&gt;&gt;&gt;&gt;&gt;&gt; testing
</span><span style="color:#e6db74"># 查看冲突文件在两分支下不同的修改
</span><span style="color:#e6db74"># ====== 为分割线，其上部分为 HEAD 即当前分支的修改
</span><span style="color:#e6db74"># 其下部分为 testing 修改
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">$ git commit -a -m &#39;</span>Merge testing branch<span style="color:#960050;background-color:#1e0010">&#39;</span>
$ git log --all --oneline --graph
*   e91a354 <span style="color:#f92672">(</span>HEAD -&gt; master<span style="color:#f92672">)</span> Merge testing branch
|<span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>| * 3db9165 <span style="color:#f92672">(</span>testing<span style="color:#f92672">)</span> Modify and delete file
* | 068a3fd modify hot.txt
|/
* cf2ed48 Add test.txt file
* af2c062 <span style="color:#f92672">(</span>tag: v0.2<span style="color:#f92672">)</span> Modify directory
* aa32f04 <span style="color:#f92672">(</span>tag: v0.1<span style="color:#f92672">)</span> Add test.txt file
* 2f25228 <span style="color:#f92672">(</span>tag: v0.0.1<span style="color:#f92672">)</span> Initial master
<span style="color:#75715e"># 以图形化的形式展现两分支的关系</span></code></pre></div>
<h3 id="3-3-a-name-section3-3-a-变基">3.3. <a name='section3-3'></a>变基</h3>

<p>另一种整合不同分支修改的方法，以下图为例。它会先提取在 experiment 分支下 C4 中引入的补丁和修改，然后在 master 分支的 C3 基础上再应用一次，从而完成变基操作。</p>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/rebase.jpg" alt="rebase" /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git checkout experiment
git rebase master
<span style="color:#75715e"># 在 experiment 分支下，将最新修改变基到 master 分支上</span>

git checkout master
git merge experiment
<span style="color:#75715e"># 然后再回到 master 分支做一次快进合并</span></code></pre></div>
<p>变基与三方合并在查看提交历史时，变基会呈现一条线，而三方合并会先分叉又合并</p>

<p>三分支的变基例子</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git rebase --onto master server client
<span style="color:#75715e"># --onto 选项指选中 client 的修改，而不选择 server 的修改，然后将其变基到 master 上</span>
<span style="color:#75715e"># 这里它会找出 client 和 server 共同祖先之后的 client 修改，即 C8、C9</span>

git checkout master
git merge client
<span style="color:#75715e"># master 快进合并到 client 处</span></code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/rebase_client.jpg" alt="rebase_client" /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git rebase master server
<span style="color:#75715e"># 将 server 变基到 master 上，参数 server 是 git checkout server 的缩写</span>

git checkout master
git merge server
<span style="color:#75715e"># master 快进到 server 处</span></code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/rebase_server.jpg" alt="rebase_server" /></p>

<h3 id="3-4-a-name-section3-4-a-优选">3.4. <a name='section3-4'></a>优选</h3>

<p>优选就是将某分支的某个提交应用到当前分支上，类似于对特定的某次提交的变基</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git cherry-pick e43a6
<span style="color:#75715e"># 在 master 分支上，将 e43a6 拉取到 master 上</span></code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/cherry.jpg" alt="cherry" /></p>

<hr />

<h2 id="4-a-name-section4-a-远程仓库">4. <a name='section4'></a>远程仓库</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git remote  <span style="color:#75715e"># 查看远程仓库</span>
origin

$ git remote -v  <span style="color:#75715e"># 查看远程仓库及对应 URL</span>
origin	https://github.com/example/demo <span style="color:#f92672">(</span>fetch<span style="color:#f92672">)</span>
origin	https://github.com/example/demo <span style="color:#f92672">(</span>push<span style="color:#f92672">)</span>

git remote add &lt;shortname&gt; &lt;url&gt;
<span style="color:#75715e"># 添加远程仓库，之后就可以用 shortname 来代替 url</span>
$ git remote add origin https://github.com/example/demo

git push &lt;remote_name&gt; &lt;brach_name&gt;
<span style="color:#75715e"># 将分支的文件推送到远程仓库中</span>
例：git push origin master
    git push origin master:master
<span style="color:#75715e"># 将本地的 master 分支推到远程仓库的 master 分支</span>
git push --set-upstream origin master:master
<span style="color:#75715e"># 将本地 master 与远程 master 绑定，这样就不用每次 push 时再加上了</span>

git fetch origin
<span style="color:#75715e"># 从远程仓库中获取本地未有的文件</span>
<span style="color:#75715e"># 但抓取的文件在工作目录还看不到，还需合并到本地的 master 分支才行</span>
git merge master

git pull origin
<span style="color:#75715e"># 获取+合并，执行后直接就能看到下拉取的文件了</span></code></pre></div>
<p>在实际 fetch 或 push 远程仓库时，遇到 &ldquo;Permission denied (publickey). Could not read from remote repository&rdquo;，这是 git 还未与远程仓库建立连接，还需 github 上生成安全的 SSH 密钥才行。具体操作如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ssh-keygen -t rsa -C <span style="color:#e6db74">&#34;youremail@example.com&#34;</span>
<span style="color:#75715e"># 生成 sshkey，执行后按三次回车</span></code></pre></div>
<p>然后会在 <code>C:\Users\xxx\.ssh\id_rsa.pub (Windows)</code>; <code>~/.ssh/id_rsa.pub(Linux)</code> 中看到生成的公钥。接着登录到 github 或 gitee 上，进入 SSH 栏，将 id_rsa.pub 的内容复制到 &ldquo;key&rdquo; 或 &ldquo;公钥&rdquo;，然后点击按钮输入账户密码生成 SSH公钥，成功后在 git 上就可访问到远程仓库了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ssh -T git@gitee.com
<span style="color:#75715e"># 在生成公钥后，也可用此命令来验证是否验证成功</span>
<span style="color:#75715e"># 同时它会添加到本机 ssh 可信列表，即 known_host 文件</span></code></pre></div>
<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/sshkey.jpg" alt="sshkey" /></p>

<p>值得注意的是，在 linux 下，要使用 cat 命令来查看 id_rsa.pub 文件。若要用 vim 查看的话，在复制到 gitee 上是一段段文本，从而导致密钥生成失败。</p>

<h3 id="4-1-a-name-1-a-远程操作的一些问题">4.1. <a name='-1'></a>远程操作的一些问题</h3>

<ol>
<li><p>当远程库被改时，在没有先拉取的情况下直接就推送，就会产生错误，提示远程库与本地不一致。所以要先拉取再推送以保证一致性</p></li>

<li><p>当在开发中有两个人同时对同一文件做出改动，就会出现之前那种冲突问题，那就要找到冲突文件并手动修改和重新提交、推送</p></li>
</ol>

<h2 id="5-a-name-section5-a-idea-中使用-git">5. <a name='section5'></a>IDEA 中使用 Git</h2>

<ol>
<li><p>创建本地仓库：在菜单栏 &ndash;&gt; VCS &ndash;&gt; Create git repo..</p></li>

<li><p>在对话框中选中项目目录，即可将其初始化。但其中的文件都是红色的，即都是未跟踪状态</p></li>

<li><p>目录或文件右键 &ndash;&gt; Git &ndash;&gt; Add filename 将文件添加至暂存区; 或者直接使用右上 git 图标栏，选中对勾(commit)，之后就可在其中选择目录或文件，随后提交即可完成添加提交操作</p></li>
</ol>

<p><img src="https://cdn.jsdelivr.net/gh/junq0420/blog_image/idea_git1.jpg" alt="idea_git" /></p>

<ol>
<li><p>点击右上的 push 图标，即可推送。首次会弹出对话框来绑定远程仓库的 url，确定后选择远程库的分支，确定即可</p></li>

<li><p>在下面菜单栏(Run, terminal..)中会有个 git 栏，它就是图形化的 git 命令。能够看到提交历史、控制台输出等</p></li>

<li><p>当然打开 Terminal 后，仍可使用 git 命令窗口来完成 git 管理</p></li>
</ol>

<p>注：但由于我建库时生成了 readme 文档，从而导致本地库与远程库不一致而 push 失败。并且在拉取时，出现了&rdquo;Can&rsquo;t update&rdquo; 和 &ldquo;master has no tracked branch&rdquo;, 随后经查阅使用 <code>git pull origin main --allow-unrelated-histories</code> 命令才成功拉取。而且由于 github 上的默认分支已经变为 main，所以还需注意修改。</p>

<p><a href="https://zhuanlan.zhihu.com/p/124204929#:~:text=IDEA%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Git%201%20%E5%9C%A8Idea%E4%B8%AD%E9%85%8D%E7%BD%AEgit%202%20%E5%B0%86%E5%B7%A5%E7%A8%8B%E6%B7%BB%E5%8A%A0%E8%87%B3git%203,%E5%B0%86%E5%B7%A5%E7%A8%8B%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E5%BA%93%20%28Gitee%29%204%20%E4%BB%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%85%8B%E9%9A%86%205%20%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8B%89%E5%8F%96%E4%BB%A3%E7%A0%81">别人的 idea git 使用介绍</a></p>

  

  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  
  <section class="sidebar-module sidebar-module-inset">
    <h4>About</h4>
    <p dir="auto">欢迎访问我的博客，这是我的 <a href="https://github.com/junq0420">Github</a></p>
  </section>
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/junq0420.github.io/2023/03/arm-cortexm/">ARM CortexM</a></li>

<li><a href="/junq0420.github.io/2023/03/arm-assembly/">ARM Assembly</a></li>

<li><a href="/junq0420.github.io/2022/08/linux_cmd/">Linux_cmd</a></li>

<li><a href="/junq0420.github.io/2022/08/git_basic/">Git_basic</a></li>

<li><a href="/junq0420.github.io/2022/08/jpa/">JPA</a></li>

    </ol>
  </section>

  

  
  <section class="sidebar-module">
    <h4>Links</h4>
    <ol class="list-unstyled">
      
      <li><a href="https://www.bilibili.com/">Bilibili</a></li>
      
      <li><a href="https://www.google.com">Google</a></li>
      
    </ol>
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p dir="auto">
      
      除非特别声明, 本站采用技术 <a href="https://gohugo.io/">Hugo</a> &amp; 主题 <a href="https://themes.gohugo.io/themes/hugo-theme-bootstrap4-blog/">hugo-theme-bootstrap4-blog</a>.
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
